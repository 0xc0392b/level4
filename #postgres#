
level4 λ docker ps -a
CONTAINER ID   IMAGE          COMMAND                  CREATED        STATUS                    PORTS     NAMES
e7abbb93c171   mongo:latest   "docker-entrypoint.s…"   4 months ago   Exited (0) 4 months ago             mongodb
level4 λ docker rm mongodb
mongodb
level4 λ docker run -d --name timescaledb -p 5432:5432 -e POSTGRES_PASSWORD=level4 timescale/timescaledb:latest-pg12
Unable to find image 'timescale/timescaledb:latest-pg12' locally
latest-pg12: Pulling from timescale/timescaledb













Digest: sha256:187dcef7384f1f100530b0dc1295acb6afb00a52ea6d720a0a0618d7ad81c241
Status: Downloaded newer image for timescale/timescaledb:latest-pg12
dc9606bb3a3f85f374be2bf5e1e9671aaea8101da051791fb88d56f28365f46b
level4 λ docker rm timescaledb
timescaledb
level4 λ docker rm timescaledb
timescaledb
level4 λ docker run -d --name level4_timescaledb -p 127.0.0.1:5432:5432 -e POSTGRES_USER=level4  -e POSTGRES_PASSWORD=level4 timescale/timescaledb:latest-pg12
5839259117adf988e8ecd0f246a0cbd8d7be0677ad2d7f0a36a2fd906d5dcdd3
level4 λ docker exec -ti level4_timescaledb psql -U level4
psql (12.9)
Type "help" for help.

level4=# 

level4=# exit
exit
level4 λ ls
_build  config  deps  lib  mix.exs  mix.lock  README.md  test
level4 λ mix ecto.create
Compiling 30 files (.ex)
warning: variable "major_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bitmex.ex:14: Exchanges.Bitmex.make_subscribe_message/2

warning: variable "major_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bittrex.ex:14: Exchanges.BitTrex.make_subscribe_message/2

warning: variable "major_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/ftx.ex:14: Exchanges.FTX.make_subscribe_message/2

warning: variable "major_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/binance.ex:14: Exchanges.Binance.make_subscribe_message/2

warning: variable "major_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/hitbtc.ex:14: Exchanges.HitBTC.make_subscribe_message/2

warning: variable "major_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/cexio.ex:14: Exchanges.CexIO.make_subscribe_message/2

warning: variable "major_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/gemini.ex:14: Exchanges.Gemini.make_subscribe_message/2

warning: variable "major_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bitstamp.ex:14: Exchanges.Bitstamp.make_subscribe_message/2

warning: variable "major_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bitfinex.ex:14: Exchanges.Bitfinex.make_subscribe_message/2

warning: variable "major_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bybit.ex:14: Exchanges.Bybit.make_subscribe_message/2

warning: variable "quote_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bitmex.ex:14: Exchanges.Bitmex.make_subscribe_message/2

warning: variable "quote_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bittrex.ex:14: Exchanges.BitTrex.make_subscribe_message/2

warning: variable "quote_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/ftx.ex:14: Exchanges.FTX.make_subscribe_message/2

warning: variable "quote_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/binance.ex:14: Exchanges.Binance.make_subscribe_message/2

warning: variable "quote_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/cexio.ex:14: Exchanges.CexIO.make_subscribe_message/2

warning: variable "quote_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/hitbtc.ex:14: Exchanges.HitBTC.make_subscribe_message/2

warning: variable "quote_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/gemini.ex:14: Exchanges.Gemini.make_subscribe_message/2

warning: variable "quote_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bybit.ex:14: Exchanges.Bybit.make_subscribe_message/2

warning: variable "json" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/ftx.ex:19: Exchanges.FTX.translate/2

warning: variable "quote_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bitstamp.ex:14: Exchanges.Bitstamp.make_subscribe_message/2

warning: variable "quote_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bitfinex.ex:14: Exchanges.Bitfinex.make_subscribe_message/2

warning: variable "json" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bittrex.ex:19: Exchanges.BitTrex.translate/2

warning: variable "json" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/binance.ex:19: Exchanges.Binance.translate/2

warning: variable "json" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bitmex.ex:19: Exchanges.Bitmex.translate/2

warning: variable "json" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/cexio.ex:19: Exchanges.CexIO.translate/2

warning: variable "json" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/hitbtc.ex:19: Exchanges.HitBTC.translate/2

warning: variable "json" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bybit.ex:19: Exchanges.Bybit.translate/2

warning: variable "sync_state" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bittrex.ex:19: Exchanges.BitTrex.translate/2

warning: variable "json" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/gemini.ex:19: Exchanges.Gemini.translate/2

warning: variable "json" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bitstamp.ex:19: Exchanges.Bitstamp.translate/2

warning: variable "sync_state" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/binance.ex:19: Exchanges.Binance.translate/2

warning: variable "sync_state" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/ftx.ex:19: Exchanges.FTX.translate/2

warning: variable "sync_state" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bitmex.ex:19: Exchanges.Bitmex.translate/2

warning: variable "sync_state" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/cexio.ex:19: Exchanges.CexIO.translate/2

warning: variable "sync_state" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/hitbtc.ex:19: Exchanges.HitBTC.translate/2

warning: variable "json" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bitfinex.ex:19: Exchanges.Bitfinex.translate/2

warning: variable "sync_state" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bitstamp.ex:19: Exchanges.Bitstamp.translate/2

warning: variable "sync_state" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bybit.ex:19: Exchanges.Bybit.translate/2

warning: variable "sync_state" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/gemini.ex:19: Exchanges.Gemini.translate/2

warning: variable "sync_state" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/bitfinex.ex:19: Exchanges.Bitfinex.translate/2

warning: variable "major_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/huobi.ex:14: Exchanges.Huobi.make_subscribe_message/2

warning: variable "quote_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/huobi.ex:14: Exchanges.Huobi.make_subscribe_message/2

warning: variable "json" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/huobi.ex:19: Exchanges.Huobi.translate/2

warning: variable "sync_state" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/huobi.ex:19: Exchanges.Huobi.translate/2

warning: variable "major_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/kraken.ex:14: Exchanges.Kraken.make_subscribe_message/2

warning: variable "quote_symbol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/kraken.ex:14: Exchanges.Kraken.make_subscribe_message/2

warning: variable "json" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/kraken.ex:19: Exchanges.Kraken.translate/2

warning: variable "sync_state" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/kraken.ex:19: Exchanges.Kraken.translate/2

warning: variable "epoch_ms" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:37: Exchanges.Poloniex.translate/2

warning: variable "epoch_ms" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:56: Exchanges.Poloniex.translate/2

warning: variable "epoch_ms" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:61: Exchanges.Poloniex.translate/2

warning: variable "epoch_ms" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:66: Exchanges.Poloniex.translate/2

warning: variable "price_Str" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:66: Exchanges.Poloniex.translate/2

warning: variable "size_str" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:66: Exchanges.Poloniex.translate/2

warning: variable "timestamp" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:66: Exchanges.Poloniex.translate/2

warning: variable "trade_id" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:66: Exchanges.Poloniex.translate/2

warning: variable "epoch_ms" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:69: Exchanges.Poloniex.translate/2

warning: variable "price_str" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:69: Exchanges.Poloniex.translate/2

warning: variable "size_str" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:69: Exchanges.Poloniex.translate/2

warning: variable "timestamp" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:69: Exchanges.Poloniex.translate/2

warning: variable "trade_id" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:69: Exchanges.Poloniex.translate/2

warning: variable "channel_id" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:34: Exchanges.Poloniex.translate/2

warning: variable "sequence_num" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/exchanges/poloniex.ex:34: Exchanges.Poloniex.translate/2

warning: variable "a" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/supervisor.ex:19: Market.Supervisor.start_link/2

warning: variable "protocol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:90: Market.Level2.WebSocket.handle_info/2

warning: variable "market" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/exchange.ex:55: Market.Exchange.terminate/2

warning: variable "reason" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/exchange.ex:55: Market.Exchange.terminate/2

warning: variable "headers" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:100: Market.Level2.WebSocket.handle_info/2

warning: variable "new_price" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/exchange.ex:66: Market.Exchange.handle_cast/2

warning: variable "protocols" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:100: Market.Level2.WebSocket.handle_info/2

warning: variable "new_size" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/exchange.ex:66: Market.Exchange.handle_cast/2

warning: variable "timestamp" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/exchange.ex:66: Market.Exchange.handle_cast/2

warning: variable "data" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:123: Market.Level2.WebSocket.handle_info/2

warning: variable "new_price" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/exchange.ex:81: Market.Exchange.handle_cast/2

warning: variable "is_fin" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:123: Market.Level2.WebSocket.handle_info/2

warning: variable "new_size" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/exchange.ex:81: Market.Exchange.handle_cast/2

warning: variable "stream_ref" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:123: Market.Level2.WebSocket.handle_info/2

warning: variable "timestamp" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/exchange.ex:81: Market.Exchange.handle_cast/2

warning: variable "stream_ref" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:132: Market.Level2.WebSocket.handle_info/2

warning: variable "stream_ref" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:223: Market.Level2.WebSocket.handle_info/2

warning: variable "killed_streams" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:241: Market.Level2.WebSocket.handle_info/2

warning: variable "protocol" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:241: Market.Level2.WebSocket.handle_info/2

warning: variable "headers" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:260: Market.Level2.WebSocket.handle_info/2

warning: variable "is_fin" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:260: Market.Level2.WebSocket.handle_info/2

warning: variable "stream_ref" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:260: Market.Level2.WebSocket.handle_info/2

warning: variable "stream_ref" is unused (if the variable is not meant to be used, prefix it with an underscore)
  lib/market/level2/websocket.ex:279: Market.Level2.WebSocket.handle_info/2

warning: module attribute @protocoldoc was set but never used
  lib/translation.ex:2

warning: invalid association `markets` in schema Storage.Model.Symbol: associated schema Storage.Model.Market does not have field `symbol_id`
  lib/storage/models/symbol.ex:1: Storage.Model.Symbol (module)

Generated level4 app
The database for Storage.Repo has already been created
level4 λ docker exec -ti level4_timescaledb psql -U level4
psql (12.9)
Type "help" for help.

level4=# show databases;
show databases;
ERROR:  unrecognized configuration parameter "databases"
level4=# \l
\l
                              List of databases
   Name    | Owner  | Encoding |  Collate   |   Ctype    | Access privileges 
-----------+--------+----------+------------+------------+-------------------
 level4    | level4 | UTF8     | en_US.utf8 | en_US.utf8 | 
 postgres  | level4 | UTF8     | en_US.utf8 | en_US.utf8 | 
 template0 | level4 | UTF8     | en_US.utf8 | en_US.utf8 | =c/level4        +
           |        |          |            |            | level4=CTc/level4
 template1 | level4 | UTF8     | en_US.utf8 | en_US.utf8 | =c/level4        +
           |        |          |            |            | level4=CTc/level4
(4 rows)

level4=# \c level4
\c level4
You are now connected to database "level4" as user "level4".
level4=# 

level4=# \dt
\dt
Did not find any relations.
level4=# mix ecto.create
mix ecto.create
level4-# 

level4-# ;
;
ERROR:  syntax error at or near "mix"
LINE 1: mix ecto.create
        ^
level4=# exit
exit
level4 λ mix ecto.create
Compiling 1 file (.ex)
The database for Storage.Repo has already been created
level4 λ mix ecto.gen.migration create_exchanges
* creating priv/repo/migrations
* creating priv/repo/migrations/20211204034841_create_exchanges.exs
level4 λ mix ecto.gen.migration create_markets
* creating priv/repo/migrations/20211204034850_create_markets.exs
level4 λ mix ecto.gen.migration create_spread_changes
* creating priv/repo/migrations/20211204034906_create_spread_changes.exs
level4 λ mix ecto.gen.migration create_symbols
* creating priv/repo/migrations/20211204034912_create_symbols.exs
level4 λ docker exec -ti level4_timescaledb psql -U level4
psql (12.9)
Type "help" for help.

level4=# \l
\l
                              List of databases
   Name    | Owner  | Encoding |  Collate   |   Ctype    | Access privileges 
-----------+--------+----------+------------+------------+-------------------
 level4    | level4 | UTF8     | en_US.utf8 | en_US.utf8 | 
 postgres  | level4 | UTF8     | en_US.utf8 | en_US.utf8 | 
 template0 | level4 | UTF8     | en_US.utf8 | en_US.utf8 | =c/level4        +
           |        |          |            |            | level4=CTc/level4
 template1 | level4 | UTF8     | en_US.utf8 | en_US.utf8 | =c/level4        +
           |        |          |            |            | level4=CTc/level4
(4 rows)

level4=# \c level4
\c level4
You are now connected to database "level4" as user "level4".
level4=# \dt
\dt
Did not find any relations.
level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | schema_migrations | table | level4
 public | symbols           | table | level4
(2 rows)

level4=# select * from symbols;
select * from symbols;
 id | symbol 
----+--------
(0 rows)

level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | schema_migrations | table | level4
(1 row)

level4=# drop table schema_migrations;
drop table schema_migrations;
DROP TABLE
level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | exchanges         | table | level4
 public | schema_migrations | table | level4
(2 rows)

level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | schema_migrations | table | level4
(1 row)

level4=# drop table schema_migrations;
drop table schema_migrations;
DROP TABLE
level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | exchanges         | table | level4
 public | markets           | table | level4
 public | schema_migrations | table | level4
 public | spread_changes    | table | level4
 public | symbols           | table | level4
(5 rows)

level4=# select * from exchanges;
select * from exchanges;
 id | name 
----+------
(0 rows)

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
(0 rows)

level4=# insert into markets (major_symbol_id, quote_symbol_id, exchange_id, market_type) values (1, 1, 1, "SPOT");
insert into markets values (1, 1, 1, "SPOT");
ERROR:  column "SPOT" does not exist
LINE 1: insert into markets values (1, 1, 1, "SPOT");
                                             ^
level4=# insert into markets (major_symbol_id, quote_symbol_id, exchange_id, market_type) values (1, 1, 1, "SPOT");
insert into markets (major_symbol_id, quote_symbol_id, exchange_id, market_type) values (1, 1, 1, "SPOT");
ERROR:  column "SPOT" does not exist
LINE 1: ...mbol_id, exchange_id, market_type) values (1, 1, 1, "SPOT");
                                                               ^
level4=# 

level4=# 

level4=# insert into markets (major_symbol_id, quote_symbol_id, exchange_id, market_type) values (1, 1, 1, 'SPOT');
insert into markets (major_symbol_id, quote_symbol_id, exchange_id, market_type) values (1, 1, 1, 'SPOT');
ERROR:  insert or update on table "markets" violates foreign key constraint "markets_major_symbol_id_fkey"
DETAIL:  Key (major_symbol_id)=(1) is not present in table "symbols".
level4=# drop table schema_migrations;
drop table schema_migrations;
DROP TABLE
level4=# \dt
\dt
Did not find any relations.
level4=# 

level4=# 

level4=# insert into exchanges (name) values ('Poloniex');
insert into exchanges values ('Coinbase');
ERROR:  invalid input syntax for type bigint: "Coinbase"
LINE 1: insert into exchanges values ('Coinbase');
                                      ^
level4=# insert into exchanges (name) values ('Coinbase');
insert into exchanges (name) values ('Coinbase');
INSERT 0 1
level4=# select * from exchanges ;
select * from exchanges ;
 id |   name   
----+----------
  1 | Coinbase
(1 row)

level4=# insert into exchanges (name) values ('FTX');
insert into exchanges (name) values ('Poloniex');
INSERT 0 1
level4=# insert into exchanges (name) values ('BYBIT);
insert into exchanges (name) values ('FTX');
INSERT 0 1
level4=# insert into exchanges (name) values ('BYBIT);
insert into exchanges (name) values ('BYBIT);
level4'# select * from exchanges ;
select * from exchanges ;
level4'# 

level4'# select * from exchanges ;
select * from exchanges ;
level4'# 

level4'# ;
;
level4'# ;
;
level4'# a
a
level4'# \dt
\dt
level4'#   C-c C-c
level4=# 

level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | exchanges         | table | level4
 public | markets           | table | level4
 public | schema_migrations | table | level4
 public | spread_changes    | table | level4
 public | symbols           | table | level4
(5 rows)

level4=# select * from exchanges ;
select * from exchanges ;
 id |   name   
----+----------
  1 | Coinbase
  2 | Poloniex
  3 | FTX
(3 rows)

level4=# 

level4=# 

level4=# select * from symbols ;
select * from symbols ;
 id | symbol 
----+--------
(0 rows)

level4=# insert into symbols (symbol) values ('ETH');
insert into symbols (symbol) values ('BTC');
INSERT 0 1
level4=# insert into symbols (symbol) values ('LTC');
insert into symbols (symbol) values ('ETH');
INSERT 0 1
level4=# insert into symbols (symbol) values ('GBP');
insert into symbols (symbol) values ('LTC');
INSERT 0 1
level4=# insert into symbols (symbol) values ('USD');
insert into symbols (symbol) values ('GBP');
INSERT 0 1
level4=# insert into symbols (symbol) values ('USD');
insert into symbols (symbol) values ('USD');
INSERT 0 1
level4=# select * from symbols ;
select * from symbols ;
 id | symbol 
----+--------
  1 | BTC
  2 | ETH
  3 | LTC
  4 | GBP
  5 | USD
(5 rows)

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
(0 rows)

level4=# insert into markets (major_symbol_id, quote_symbol_id, exchange_id, market_type) values (1, 4, 1, 'SPOT') ;
insert into markets (major_symbol_id, quote_symbol_id, exchange_id, market_type) values (1, 4, 1, 'SPOT') ;
INSERT 0 1
level4=# 

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               4 |           1 | SPOT
(1 row)

level4=# select * from spread_changes ;
select * from spread_changes ;
 id | market_id | best_bid_price | best_ask_price | timestamp 
----+-----------+----------------+----------------+-----------
(0 rows)

level4=# insert into spread_changes (market_id, best_bid_price, best_ask_price, timestamp) values (1, 100, 101, now()) ;
insert into spread_changes (market_id, best_bid_price, best_ask_price, timestamp) values (1, 100, 101, now()) ;
INSERT 0 1
level4=# select * from spread_changes ;
select * from spread_changes ;
 id | market_id | best_bid_price | best_ask_price |         timestamp          
----+-----------+----------------+----------------+----------------------------
  1 |         1 |            100 |            101 | 2021-12-04 04:31:14.713369
(1 row)

level4=# drop database level4;
drop database level4
level4-# drop database level4;
drop database level4;
ERROR:  syntax error at or near "drop"
LINE 2: drop database level4;
        ^
level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | exchanges         | table | level4
 public | markets           | table | level4
 public | schema_migrations | table | level4
 public | spread_changes    | table | level4
 public | symbols           | table | level4
(5 rows)

level4=# drop table exchanges cascade;
drop table exchanges;
ERROR:  cannot drop table exchanges because other objects depend on it
DETAIL:  constraint markets_exchange_id_fkey on table markets depends on table exchanges
HINT:  Use DROP ... CASCADE to drop the dependent objects too.
level4=# drop table markets cascade;
drop table exchanges cascade;
NOTICE:  drop cascades to constraint markets_exchange_id_fkey on table markets
DROP TABLE
level4=# drop table spread_changes cascade;
drop table markets cascade;
NOTICE:  drop cascades to constraint spread_changes_market_id_fkey on table spread_changes
DROP TABLE
level4=# drop table symbols cascade;
drop table spread_changes cascade;
DROP TABLE
level4=# drop table schema_migrations cascade;
drop table symbols cascade;
DROP TABLE
level4=# drop table schema_migrations cascade;
drop table schema_migrations cascade;
DROP TABLE
level4=# 

level4=# 

level4=# \dt
\dt
Did not find any relations.
level4=# 

level4=# 

level4=# 

level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | schema_migrations | table | level4
(1 row)

level4=# drop table schema_migrations cascade;
drop table schema_migrations cascade;
DROP TABLE
level4=# 

level4=# 

level4=# 

level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | schema_migrations | table | level4
(1 row)

level4=# drop table schema_migrations cascade;
drop table schema_migrations cascade;
DROP TABLE
level4=# 

level4=# 

level4=# 

level4=# 

level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | exchanges         | table | level4
 public | markets           | table | level4
 public | schema_migrations | table | level4
 public | spread_changes    | table | level4
 public | symbols           | table | level4
(5 rows)

level4=# select * from symbols;
select * from symbols;
 id | symbol 
----+--------
(0 rows)

level4=# select * from symbols;
select * from symbols;
 id | symbol 
----+--------
  1 | BTC
(1 row)

level4=# select * from symbols;
select * from symbols;
 id | symbol 
----+--------
  1 | BTC
  2 | LTC
  3 | ETH
(3 rows)

level4=# select * from exchanges;
select * from exchanges;
 id |   name   
----+----------
  1 | Coinbase
  2 | Poloniex
(2 rows)

level4=# \dtr
\dtr
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | exchanges         | table | level4
 public | markets           | table | level4
 public | schema_migrations | table | level4
 public | spread_changes    | table | level4
 public | symbols           | table | level4
(5 rows)

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
(0 rows)

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
(0 rows)

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               4 |           1 | SPOT
(1 row)

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               4 |           1 | SPOT
  2 |               2 |               4 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
(3 rows)

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               4 |           1 | SPOT
  2 |               2 |               4 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
(3 rows)

level4=# select * from exchanges;
select * from exchanges;
 id |   name   
----+----------
  1 | Coinbase
  2 | Poloniex
(2 rows)

level4=# select * from exchanges;
select * from exchanges;
 id |     name     
----+--------------
  1 | Coinbase
  2 | Poloniex
  3 | COINBASE-PRO
(3 rows)

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               4 |           1 | SPOT
  2 |               2 |               4 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
  4 |               2 |               4 |           3 | SPOT
(4 rows)

level4=# select * from exchanges;
select * from exchanges;
 id |     name     
----+--------------
  1 | Coinbase
  2 | Poloniex
  3 | COINBASE-PRO
(3 rows)

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               4 |           1 | SPOT
  2 |               2 |               4 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
  4 |               2 |               4 |           3 | SPOT
(4 rows)

level4=# select * from spread_changes;
select * from spread_changes;
 id | market_id | best_bid_price | best_ask_price | timestamp 
----+-----------+----------------+----------------+-----------
(0 rows)

level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | exchanges         | table | level4
 public | markets           | table | level4
 public | schema_migrations | table | level4
 public | spread_changes    | table | level4
 public | symbols           | table | level4
(5 rows)

level4=# drop table markets cascade ;
drop table exchanges cascade ;
NOTICE:  drop cascades to constraint markets_exchange_id_fkey on table markets
DROP TABLE
level4=# drop table spread_changes cascade ;
drop table markets cascade ;
NOTICE:  drop cascades to constraint spread_changes_market_id_fkey on table spread_changes
DROP TABLE
level4=# drop table symbols cascade ;
drop table spread_changes cascade ;
DROP TABLE
level4=# drop table schema_migrations cascade ;
drop table symbols cascade ;
DROP TABLE
level4=# drop table schema_migrations cascade ;
drop table schema_migrations cascade ;
DROP TABLE
level4=# 

level4=# 

level4=# \dt
\dt
Did not find any relations.
level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | best_ask_prices   | table | level4
 public | best_bid_prices   | table | level4
 public | exchanges         | table | level4
 public | markets           | table | level4
 public | schema_migrations | table | level4
 public | symbols           | table | level4
(6 rows)

level4=# select * from best_bid_prices;
select * from best_bid_prices;
 id | market_id | price | size | timestamp 
----+-----------+-------+------+-----------
(0 rows)

level4=# select * from exchanges;
select * from exchanges;
 id |     name     
----+--------------
  1 | COINBASE-PRO
(1 row)

level4=# select * from markets;
select * from markets;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               2 |           1 | SPOT
(1 row)

level4=# select * from symbols;
select * from symbols;
 id | symbol 
----+--------
  1 | LTC
  2 | GBP
(2 rows)

level4=# select * from best_bid_prices;
select * from best_ask_prices;
 id | market_id | price  |    size     |         timestamp          
----+-----------+--------+-------------+----------------------------
  1 |         1 | 119.86 |  5.86548162 | 2021-12-07 06:01:26.19552
  2 |         1 |  119.9 |  1.58543167 | 2021-12-07 06:01:49.792565
  3 |         1 | 119.92 | 21.28442558 | 2021-12-07 06:01:49.80813
  4 |         1 | 119.91 |         3.5 | 2021-12-07 06:01:51.079424
(4 rows)

level4=# select * from best_bid_prices;
select * from best_bid_prices;
 id | market_id | price  |    size     |         timestamp          
----+-----------+--------+-------------+----------------------------
  1 |         1 | 119.74 |         3.5 | 2021-12-07 06:01:26.632475
  2 |         1 | 119.75 |      0.9955 | 2021-12-07 06:01:49.607407
  3 |         1 | 119.76 |         3.5 | 2021-12-07 06:01:49.622881
  4 |         1 | 119.77 |      0.9955 | 2021-12-07 06:01:49.76974
  5 |         1 | 119.78 |         3.5 | 2021-12-07 06:01:49.814421
  6 |         1 | 119.79 |  9.42215258 | 2021-12-07 06:01:49.827187
  7 |         1 |  119.8 |         3.5 | 2021-12-07 06:01:49.875936
  8 |         1 | 119.81 |      0.9955 | 2021-12-07 06:02:06.502465
  9 |         1 | 119.82 |         3.5 | 2021-12-07 06:02:06.530334
 10 |         1 | 119.84 |  9.41743017 | 2021-12-07 06:02:06.688469
 11 |         1 | 119.85 |         3.5 | 2021-12-07 06:02:06.712586
 12 |         1 | 119.88 |  2.64241765 | 2021-12-07 06:02:08.245899
 13 |         1 | 119.89 |         3.5 | 2021-12-07 06:02:08.266164
 14 |         1 | 119.88 | 12.05674423 | 2021-12-07 06:02:09.412629
 15 |         1 | 119.89 |         3.5 | 2021-12-07 06:02:09.772935
 16 |         1 | 119.85 |  5.80819757 | 2021-12-07 06:02:10.122872
 17 |         1 | 119.86 |  9.41578094 | 2021-12-07 06:02:10.749535
 18 |         1 | 119.87 |         3.5 | 2021-12-07 06:02:10.769254
(18 rows)

level4=# select * from best_bid_prices;
select * from best_bid_prices;
 id  | market_id |  price   |    size     |         timestamp          
-----+-----------+----------+-------------+----------------------------
   1 |         1 |   119.74 |         3.5 | 2021-12-07 06:01:26.632475
   2 |         1 |   119.75 |      0.9955 | 2021-12-07 06:01:49.607407
   3 |         1 |   119.76 |         3.5 | 2021-12-07 06:01:49.622881
   4 |         1 |   119.77 |      0.9955 | 2021-12-07 06:01:49.76974
   5 |         1 |   119.78 |         3.5 | 2021-12-07 06:01:49.814421
   6 |         1 |   119.79 |  9.42215258 | 2021-12-07 06:01:49.827187
   7 |         1 |    119.8 |         3.5 | 2021-12-07 06:01:49.875936
   8 |         1 |   119.81 |      0.9955 | 2021-12-07 06:02:06.502465
   9 |         1 |   119.82 |         3.5 | 2021-12-07 06:02:06.530334
  10 |         1 |   119.84 |  9.41743017 | 2021-12-07 06:02:06.688469
  11 |         1 |   119.85 |         3.5 | 2021-12-07 06:02:06.712586
  12 |         1 |   119.88 |  2.64241765 | 2021-12-07 06:02:08.245899
  13 |         1 |   119.89 |         3.5 | 2021-12-07 06:02:08.266164
  14 |         1 |   119.88 | 12.05674423 | 2021-12-07 06:02:09.412629
  15 |         1 |   119.89 |         3.5 | 2021-12-07 06:02:09.772935
  16 |         1 |   119.85 |  5.80819757 | 2021-12-07 06:02:10.122872
  17 |         1 |   119.86 |  9.41578094 | 2021-12-07 06:02:10.749535
  18 |         1 |   119.87 |         3.5 | 2021-12-07 06:02:10.769254
  19 |         1 |   119.86 |  9.41578094 | 2021-12-07 06:02:15.827548
  20 |         1 |   119.85 |  2.30819757 | 2021-12-07 06:02:15.932958
  21 |         1 |   119.83 | 18.83084855 | 2021-12-07 06:02:15.967831
  22 |         1 |   119.85 |  9.41677826 | 2021-12-07 06:02:15.97331
  23 |         1 |   119.82 |  2.24261763 | 2021-12-07 06:02:15.986711
  24 |         1 |   119.83 |         3.5 | 2021-12-07 06:02:16.182727
  25 |         2 | 38376.92 |   0.0116816 | 2021-12-07 06:02:27.004807
  26 |         2 | 38377.54 |  0.01961216 | 2021-12-07 06:02:27.778704
  27 |         2 | 38378.29 |   0.0165843 | 2021-12-07 06:02:27.795494
  28 |         2 | 38377.54 |  0.01961216 | 2021-12-07 06:02:28.132315
  29 |         2 | 38378.33 |  0.01289939 | 2021-12-07 06:02:28.153307
  30 |         2 | 38376.92 |   0.0116816 | 2021-12-07 06:02:28.504366
  31 |         2 |  38376.9 |     1.5e-05 | 2021-12-07 06:02:31.49222
--More-- 
  32 |         2 | 38375.39 |  0.01961346 | 2021-12-07 06:02:35.384511
--More-- 
  33 |         2 | 38376.48 |  0.02582007 | 2021-12-07 06:02:35.395043
--More-- q
level4=# 

level4=# select count(*) from symbols;
sellect count(*) from exchanges;
ERROR:  syntax error at or near "sellect"
LINE 1: sellect count(*) from exchanges;
        ^
level4=# select count(*) from exchanges;
select count(*) from exchanges;
 count 
-------
     1
(1 row)

level4=# select count(*) from symbols;
select count(*) from symbols;
 count 
-------
     5
(1 row)

level4=# select count(*) from best_bid_prices;
select count(*) from best_ask_prices;
 count 
-------
  1041
(1 row)

level4=# select count(*) from best_bid_prices;
select count(*) from best_bid_prices;
 count 
-------
  1593
(1 row)

level4=# select * from symbols;
select * from symbols;
 id | symbol 
----+--------
  1 | LTC
  2 | GBP
  3 | BTC
  4 | USD
  5 | ETH
  6 | MATIC
(6 rows)

level4=# select * from markets;
select * from markets;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               2 |           1 | SPOT
  2 |               3 |               2 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
  4 |               5 |               2 |           1 | SPOT
  5 |               5 |               4 |           1 | SPOT
  6 |               6 |               2 |           1 | SPOT
  7 |               6 |               4 |           1 | SPOT
(7 rows)

level4=# select * from symbols;
select * from symbols;
 id | symbol 
----+--------
  1 | LTC
  2 | GBP
  3 | BTC
  4 | USD
  5 | ETH
  6 | MATIC
  7 | ADA
(7 rows)

level4=# select * from markets;
select * from markets;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               2 |           1 | SPOT
  2 |               3 |               2 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
  4 |               5 |               2 |           1 | SPOT
  5 |               5 |               4 |           1 | SPOT
  6 |               6 |               2 |           1 | SPOT
  7 |               6 |               4 |           1 | SPOT
  8 |               7 |               4 |           1 | SPOT
  9 |               7 |               2 |           1 | SPOT
(9 rows)

level4=# select * from markets;
select * from markets;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               2 |           1 | SPOT
  2 |               3 |               2 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
  4 |               5 |               2 |           1 | SPOT
  5 |               5 |               4 |           1 | SPOT
  6 |               6 |               2 |           1 | SPOT
  7 |               6 |               4 |           1 | SPOT
  8 |               7 |               4 |           1 | SPOT
  9 |               7 |               2 |           1 | SPOT
 10 |               8 |               2 |           1 | SPOT
 11 |               8 |               4 |           1 | SPOT
(11 rows)

level4=# select * from markets;
select * from markets;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               2 |           1 | SPOT
  2 |               3 |               2 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
  4 |               5 |               2 |           1 | SPOT
  5 |               5 |               4 |           1 | SPOT
  6 |               6 |               2 |           1 | SPOT
  7 |               6 |               4 |           1 | SPOT
  8 |               7 |               4 |           1 | SPOT
  9 |               7 |               2 |           1 | SPOT
 10 |               8 |               2 |           1 | SPOT
 11 |               8 |               4 |           1 | SPOT
 12 |               9 |               2 |           1 | SPOT
 13 |               9 |               4 |           1 | SPOT
 14 |              10 |               2 |           1 | SPOT
 15 |              10 |               4 |           1 | SPOT
(15 rows)

level4=# select count(*) from best_bid_prices;
select count(*) best_bid_prices;
 best_bid_prices 
-----------------
               1
(1 row)

level4=# select count(*) from best_bid_prices;
select count(*) from best_bid_prices;
 count 
-------
  9312
(1 row)

level4=# select * from symbols;
select * from symbols;
 id | symbol 
----+--------
  1 | LTC
  2 | GBP
  3 | BTC
  4 | USD
  5 | ETH
  6 | MATIC
  7 | ADA
  8 | CHZ
  9 | OMG
 10 | DOGE
(10 rows)

level4=# select * from symbols;
select * from symbols;
 id | symbol 
----+--------
  1 | LTC
  2 | GBP
  3 | BTC
  4 | USD
  5 | ETH
  6 | MATIC
  7 | ADA
  8 | CHZ
  9 | OMG
 10 | DOGE
 11 | SHIB
 12 | SOL
(12 rows)

level4=# SELECT create_hypertable('best_bid_prices', 'timestamp', migrate_data => true);
SELECT create_hypertable('best_bid_prices', 'timestamp');
ERROR:  table "best_bid_prices" is not empty
HINT:  You can migrate data by specifying 'migrate_data => true' when calling this function.
level4=# SELECT create_hypertable('best_bid_prices', 'timestamp', migrate_data => true);
SELECT create_hypertable('best_bid_prices', 'timestamp', migrate_data => true);
NOTICE:  adding not-null constraint to column "timestamp"
DETAIL:  Time dimensions cannot have NULL values.
ERROR:  cannot create a unique index without the column "timestamp" (used in partitioning)
level4=# select * from symbols;
select * from symbols;
 id | symbol 
----+--------
  1 | LTC
  2 | GBP
  3 | BTC
  4 | USD
  5 | ETH
  6 | MATIC
  7 | ADA
  8 | CHZ
  9 | OMG
 10 | DOGE
 11 | SHIB
 12 | SOL
(12 rows)

level4=# MarketSupervisor.start_market(%Market{exchange_name: "POLONIEX", major_symbol: "ETH", quote_symbol: "USDT", market_type: "SPOT", ws_url: "api2.poloniex.com", ws_port: 443, translation_scheme: Exchanges.Poloniex})
MarketSupervisor.start_market(%Market{exchange_name: "POLONIEX", major_symbol: "ETH", quote_symbol: "USDT", market_type: "SPOT", ws_url: "api2.poloniex.com", ws_port: 443, translation_scheme: Exchanges.Poloniex})
level4-# ;
;
ERROR:  syntax error at or near "MarketSupervisor"
LINE 1: MarketSupervisor.start_market(%Market{exchange_name: "POLONI...
        ^
level4=# 

level4=# 

level4=# select * from symbols;
select * from symbols;
 id | symbol 
----+--------
  1 | LTC
  2 | GBP
  3 | BTC
  4 | USD
  5 | ETH
  6 | MATIC
  7 | ADA
  8 | CHZ
  9 | OMG
 10 | DOGE
 11 | SHIB
 12 | SOL
 13 | USDT
(13 rows)

level4=# select count(*) from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               2 |           1 | SPOT
  2 |               3 |               2 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
  4 |               5 |               2 |           1 | SPOT
  5 |               5 |               4 |           1 | SPOT
  6 |               6 |               2 |           1 | SPOT
  7 |               6 |               4 |           1 | SPOT
  8 |               7 |               4 |           1 | SPOT
  9 |               7 |               2 |           1 | SPOT
 10 |               8 |               2 |           1 | SPOT
 11 |               8 |               4 |           1 | SPOT
 12 |               9 |               2 |           1 | SPOT
 13 |               9 |               4 |           1 | SPOT
 14 |              10 |               2 |           1 | SPOT
 15 |              10 |               4 |           1 | SPOT
 16 |              11 |               2 |           1 | SPOT
 17 |              11 |               4 |           1 | SPOT
 18 |              12 |               2 |           1 | SPOT
 19 |              12 |               4 |           1 | SPOT
 20 |               5 |              13 |           2 | SPOT
 21 |               3 |              13 |           2 | SPOT
 22 |               1 |              13 |           2 | SPOT
(22 rows)

level4=# select * from exchanges ;
select * from exchanges ;
 id |     name     
----+--------------
  1 | COINBASE-PRO
  2 | POLONIEX
(2 rows)

level4=# select count(*) from best_ask_prices;
select count(*) from best_bid_prices;
 count 
-------
 50747
(1 row)

level4=# select count(*) from best_ask_prices;
select count(*) from best_ask_prices;
 count 
-------
 45894
(1 row)

level4=# select count(*) from markets ;
select count(*) from markets ;
 count 
-------
    25
(1 row)

level4=# select count(*) from markets ;
select count(*) from markets ;
 count 
-------
    31
(1 row)

level4=# select count(*) from best_ask_prices;
select count(*) from best_ask_prices;
 count 
-------
 61437
(1 row)

level4=# select count(*) from best_ask_prices;
select count(*) from best_ask_prices;
 count 
-------
 61584
(1 row)

level4=# select count(*) from best_ask_prices;
select count(*) from best_ask_prices;
 count 
-------
 68141
(1 row)

level4=# 

level4=# 

level4=# 

level4=# select count(*) from markets ;
select count(*) from symbols ;
 count 
-------
    18
(1 row)

level4=# select count(*) from exchanges ;
select count(*) from markets ;
 count 
-------
    33
(1 row)

level4=# select count(*) from exchanges ;
select count(*) from exchanges ;
 count 
-------
     2
(1 row)

level4=# select count(*) from best_bid_prices;
select count(*) from best_ask_prices;
 count 
-------
 71155
(1 row)

level4=# select count(*) from best_bid_prices;
select count(*) from best_bid_prices;
 count 
-------
 83280
(1 row)

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# select count(*) from symbols ;
select count(*) from symbols ;
 count 
-------
    18
(1 row)

level4=# select count(*) from markets ;
select count(*) from markets ;
 count 
-------
    33
(1 row)

level4=# select count(*) from exchanges ;
select count(*) from exchanges ;
 count 
-------
     2
(1 row)

level4=# select count(*) from best_bid_prices ;
select count(*) from best_bid_prices ;
 count  
--------
 100831
(1 row)

level4=# select count(*) from best_ask_prices ;
select count(*) from best_ask_prices ;
 count 
-------
 90315
(1 row)

level4=# select count(*) from best_bid_prices ;
select count(*) from best_bid_prices ;
 count  
--------
 172701
(1 row)

level4=# select count(*) from best_ask_prices ;
select count(*) from best_ask_prices ;
 count  
--------
 154835
(1 row)

level4=# select count(*) from best_ask_prices ;
select count(*) from best_ask_prices ;
 count  
--------
 236899
(1 row)

level4=# select count(*) from best_ask_prices ;
select count(*) from best_ask_prices ;
  count  
---------
 2999537
(1 row)

level4=# select count(*) from best_bid_prices ;
select count(*) from best_bid_prices ;
  count  
---------
 2979844
(1 row)

level4=# 

level4=# 

level4=# \l+
\l+
                                                                List of databases
   Name    | Owner  | Encoding |  Collate   |   Ctype    | Access privileges |  Size   | Tablespace |                Description                 
-----------+--------+----------+------------+------------+-------------------+---------+------------+--------------------------------------------
 level4    | level4 | UTF8     | en_US.utf8 | en_US.utf8 |                   | 534 MB  | pg_default | 
 postgres  | level4 | UTF8     | en_US.utf8 | en_US.utf8 |                   | 9233 kB | pg_default | default administrative connection database
 template0 | level4 | UTF8     | en_US.utf8 | en_US.utf8 | =c/level4        +| 7825 kB | pg_default | unmodifiable empty database
           |        |          |            |            | level4=CTc/level4 |         |            | 
 template1 | level4 | UTF8     | en_US.utf8 | en_US.utf8 | =c/level4        +| 9241 kB | pg_default | default template for new databases
           |        |          |            |            | level4=CTc/level4 |         |            | 
(4 rows)

level4=# 

level4=# 

level4=# drop table best_ask_prices ;
drop table best_bid_prices ;
DROP TABLE
level4=# drop table best_ask_prices ;
drop table best_ask_prices ;
DROP TABLE
level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | exchanges         | table | level4
 public | markets           | table | level4
 public | schema_migrations | table | level4
 public | symbols           | table | level4
(4 rows)

level4=# drop table exchanges casecade ;
drop table exchanges casecade ;
ERROR:  syntax error at or near "cascade"
LINE 1: drop table exchanges casecade ;
                             ^
level4=# ERROR:  syntax error at or near "cascade"
ERROR:  syntax error at or near "cascade"
level4-# drop table exchanges;
drop table exchanges;
ERROR:  syntax error at or near "ERROR"
LINE 1: ERROR:  syntax error at or near "cascade"
        ^
level4=# 

level4=# drop table exchanges ;
drop table exchanges cascade ;
ERROR:  cannot drop table exchanges because other objects depend on it
DETAIL:  constraint markets_exchange_id_fkey on table markets depends on table exchanges
HINT:  Use DROP ... CASCADE to drop the dependent objects too.
level4=# drop table markets cascade ;
drop table exchanges cascade ;
NOTICE:  drop cascades to constraint markets_exchange_id_fkey on table markets
DROP TABLE
level4=# 

level4=# drop table symbols cascade ;
drop table markets cascade ;
DROP TABLE
level4=# drop table schema_migrations cascade ;
drop table symbols cascade ;
DROP TABLE
level4=# drop table schema_migrations cascade ;
drop table schema_migrations cascade ;
DROP TABLE
level4=# \dt
\dt
Did not find any relations.
level4=# 

level4=# 

level4=# SELECT create_hypertable('best_bid_prices', 'timestamp');
SELECT create_hypertable('best_bid_prices', 'timestamp');
NOTICE:  adding not-null constraint to column "timestamp"
DETAIL:  Time dimensions cannot have NULL values.
ERROR:  cannot create a unique index without the column "timestamp" (used in partitioning)
level4=# 

level4=# 

level4=# select * from best_bid_prices ;
select * from best_bid_prices ;
 id | market_id | price | size | timestamp 
----+-----------+-------+------+-----------
(0 rows)

level4=# \dtr
\dtr
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | best_ask_prices   | table | level4
 public | best_bid_prices   | table | level4
 public | exchanges         | table | level4
 public | markets           | table | level4
 public | schema_migrations | table | level4
 public | symbols           | table | level4
(6 rows)

level4=# drop table best_bid_prices cascade ;
drop table best_ask_prices cascade ;
DROP TABLE
level4=# drop table best_bid_prices cascade ;
drop table best_bid_prices cascade ;
DROP TABLE
level4=# drop table exchanges cascade ;
drop table exchanges cascade ;
NOTICE:  drop cascades to constraint markets_exchange_id_fkey on table markets
DROP TABLE
level4=# drop table symbols cascade ;
drop table markets cascade ;
DROP TABLE
level4=# drop table schema_migrations cascade ;
drop table symbols cascade ;
DROP TABLE
level4=# drop table schema_migrations cascade ;
drop table schema_migrations cascade ;
DROP TABLE
level4=# \dt
\dt
Did not find any relations.
level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# SELECT create_hypertable('best_bid_prices', 'timestamp');
SELECT create_hypertable('best_bid_prices', 'timestamp');
ERROR:  cannot create a unique index without the column "timestamp" (used in partitioning)
level4=# 

level4=# \d+ best_bid_prices
\d+ best_bid_prices
                                                           Table "public.best_bid_prices"
  Column   |            Type             | Collation | Nullable |                   Default                   | Storage | Stats target | Description 
-----------+-----------------------------+-----------+----------+---------------------------------------------+---------+--------------+-------------
 id        | bigint                      |           | not null | nextval('best_bid_prices_id_seq'::regclass) | plain   |              | 
 market_id | bigint                      |           | not null |                                             | plain   |              | 
 price     | double precision            |           | not null |                                             | plain   |              | 
 size      | double precision            |           | not null |                                             | plain   |              | 
 timestamp | timestamp without time zone |           | not null |                                             | plain   |              | 
Indexes:
    "best_bid_prices_pkey" PRIMARY KEY, btree (id)
Foreign-key constraints:
    "best_bid_prices_market_id_fkey" FOREIGN KEY (market_id) REFERENCES markets(id)
Access method: heap

level4=# 

level4=# 

level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | best_ask_prices   | table | level4
 public | best_bid_prices   | table | level4
 public | exchanges         | table | level4
 public | markets           | table | level4
 public | schema_migrations | table | level4
 public | symbols           | table | level4
(6 rows)

level4=# 

level4=# drop table best_ask_prices
drop table best_ask_prices
level4-# ;
;
DROP TABLE
level4=# drop table best_bid_prices;
drop table best_bid_prices;
DROP TABLE
level4=# drop table exchanges exchanges;
drop table exchanges exchanges;
ERROR:  syntax error at or near "exchanges"
LINE 1: drop table exchanges cascade ;
                             ^
level4=# LINE 1: drop table exchanges cascade ;
LINE 1: drop table exchanges
ERROR:  syntax error at or near "LINE"
LINE 1: LINE 1: drop table exchanges cascade ;
        ^
level4=# LINE 1: drop table exchanges
LINE 1: drop table exchanges
level4-# 

level4-# 

level4-# drop table exchanges cascade ;
drop table exchanges cascade ;
ERROR:  syntax error at or near "LINE"
LINE 1: LINE 1: drop table exchanges
        ^
level4=# 

level4=# 

level4=# drop table markets cascade ;
drop table exchanges cascade ;
NOTICE:  drop cascades to constraint markets_exchange_id_fkey on table markets
DROP TABLE
level4=# drop table symbols cascade ;
drop table markets cascade ;
DROP TABLE
level4=# drop table symbols cascade ;
drop table symbols cascade ;
DROP TABLE
level4=# \dt
\dt
              List of relations
 Schema |       Name        | Type  | Owner  
--------+-------------------+-------+--------
 public | schema_migrations | table | level4
(1 row)

level4=# drop table schema_migrations ;
drop table schema_migrations ;
DROP TABLE
level4=# 

level4=# 

level4=# 

level4=# \dt
\dt
Did not find any relations.
level4=# \d+ best_bid_prices
\d+ best_bid_prices
                                         Table "public.best_bid_prices"
  Column   |            Type             | Collation | Nullable | Default | Storage | Stats target | Description 
-----------+-----------------------------+-----------+----------+---------+---------+--------------+-------------
 market_id | bigint                      |           | not null |         | plain   |              | 
 price     | double precision            |           | not null |         | plain   |              | 
 size      | double precision            |           | not null |         | plain   |              | 
 timestamp | timestamp without time zone |           | not null |         | plain   |              | 
Foreign-key constraints:
    "best_bid_prices_market_id_fkey" FOREIGN KEY (market_id) REFERENCES markets(id)
Access method: heap

level4=# 

level4=# 

level4=# SELECT create_hypertable('best_bid_prices', 'timestamp');
SELECT create_hypertable('best_bid_prices', 'timestamp');
      create_hypertable       
------------------------------
 (4,public,best_bid_prices,t)
(1 row)

level4=# SELECT create_hypertable('best_ask_prices', 'timestamp');
SELECT create_hypertable('best_ask_prices', 'timestamp');
      create_hypertable       
------------------------------
 (5,public,best_ask_prices,t)
(1 row)

level4=# 

level4=# 

level4=# select count(*) from best_ask_prices ;
select count(*) from best_ask_prices ;
 count 
-------
   147
(1 row)

level4=# select count(*) from best_ask_prices ;
select count(*) from best_ask_prices ;
 count 
-------
   375
(1 row)

level4=# select * from markets ;
select * from symbols ;
 id | symbol 
----+--------
  1 | LTC
  2 | GBP
  3 | BTC
  4 | USD
(4 rows)

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               2 |           1 | SPOT
  2 |               3 |               2 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
(3 rows)

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               2 |           1 | SPOT
  2 |               3 |               2 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
  4 |               1 |               4 |           1 | SPOT
(4 rows)

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               2 |           1 | SPOT
  2 |               3 |               2 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
  4 |               1 |               4 |           1 | SPOT
  5 |               5 |               4 |           1 | SPOT
  6 |               5 |               2 |           1 | SPOT
(6 rows)

level4=# select count(*) from best_ask_prices ;
select count(*) from best_ask_prices ;
 count 
-------
 28856
(1 row)

level4=# select * from exchanges ;
select * from exchanges ;
 id |     name     
----+--------------
  1 | COINBASE-PRO
(1 row)

level4=# select * from exchanges ;
select * from exchanges ;
 id |     name     
----+--------------
  1 | COINBASE-PRO
  2 | POLONIEX
(2 rows)

level4=# select count(*) from best_ask_prices ;
select count(*) from best_ask_prices ;
 count 
-------
 77755
(1 row)

level4=# select * from best_bid_prices limit 25 ;
select * from best_bid_prices limit 10 ;
 market_id | price  |    size     |         timestamp          
-----------+--------+-------------+----------------------------
         1 | 121.96 |         3.5 | 2021-12-08 00:31:39.913589
         1 | 121.97 |      0.9955 | 2021-12-08 00:31:40.82103
         1 | 121.98 |         3.5 | 2021-12-08 00:31:40.853845
         1 | 121.99 |      0.9955 | 2021-12-08 00:31:40.909144
         1 |    122 |         3.5 | 2021-12-08 00:31:40.963028
         1 | 121.98 |         3.5 | 2021-12-08 00:31:48.728648
         1 | 121.95 | 52.47925118 | 2021-12-08 00:31:49.43994
         1 | 121.96 |         3.5 | 2021-12-08 00:31:49.551163
         1 | 121.92 | 18.55398159 | 2021-12-08 00:31:54.324723
         1 | 121.95 |  9.27767555 | 2021-12-08 00:31:54.338896
(10 rows)

level4=# select * from best_bid_prices limit 25 ;
select * from best_bid_prices limit 100 ;
 market_id | price  |    size     |         timestamp          
-----------+--------+-------------+----------------------------
         1 | 121.96 |         3.5 | 2021-12-08 00:31:39.913589
         1 | 121.97 |      0.9955 | 2021-12-08 00:31:40.82103
         1 | 121.98 |         3.5 | 2021-12-08 00:31:40.853845
         1 | 121.99 |      0.9955 | 2021-12-08 00:31:40.909144
         1 |    122 |         3.5 | 2021-12-08 00:31:40.963028
         1 | 121.98 |         3.5 | 2021-12-08 00:31:48.728648
         1 | 121.95 | 52.47925118 | 2021-12-08 00:31:49.43994
         1 | 121.96 |         3.5 | 2021-12-08 00:31:49.551163
         1 | 121.92 | 18.55398159 | 2021-12-08 00:31:54.324723
         1 | 121.95 |  9.27767555 | 2021-12-08 00:31:54.338896
         1 | 121.92 | 18.55398159 | 2021-12-08 00:31:54.415614
         1 | 121.91 | 13.11019084 | 2021-12-08 00:31:54.489903
         1 | 121.92 |         3.5 | 2021-12-08 00:31:54.51547
         1 | 121.91 | 13.11019084 | 2021-12-08 00:31:55.322891
         1 | 121.92 |      0.9955 | 2021-12-08 00:32:01.875342
         1 | 121.95 |  2.53252478 | 2021-12-08 00:32:01.922249
         1 | 121.96 |         3.5 | 2021-12-08 00:32:01.99249
         1 | 121.99 |  9.27562065 | 2021-12-08 00:32:02.010076
         1 |    122 |         3.5 | 2021-12-08 00:32:02.063832
         1 | 122.03 |  2.17827867 | 2021-12-08 00:32:02.183087
         1 |    122 |         3.5 | 2021-12-08 00:32:02.366137
         1 | 122.02 |   9.2734012 | 2021-12-08 00:32:02.951335
         1 | 121.99 | 18.54674362 | 2021-12-08 00:32:03.621967
         1 | 121.98 |  2.17945751 | 2021-12-08 00:32:04.292851
         1 | 121.95 |  2.53252478 | 2021-12-08 00:32:04.305219
(25 rows)

level4=# select * from best_bid_prices limit 100 ;
select * from best_bid_prices limit 100 ;
 market_id | price  |    size     |         timestamp          
-----------+--------+-------------+----------------------------
         1 | 121.96 |         3.5 | 2021-12-08 00:31:39.913589
         1 | 121.97 |      0.9955 | 2021-12-08 00:31:40.82103
         1 | 121.98 |         3.5 | 2021-12-08 00:31:40.853845
         1 | 121.99 |      0.9955 | 2021-12-08 00:31:40.909144
         1 |    122 |         3.5 | 2021-12-08 00:31:40.963028
         1 | 121.98 |         3.5 | 2021-12-08 00:31:48.728648
         1 | 121.95 | 52.47925118 | 2021-12-08 00:31:49.43994
         1 | 121.96 |         3.5 | 2021-12-08 00:31:49.551163
         1 | 121.92 | 18.55398159 | 2021-12-08 00:31:54.324723
         1 | 121.95 |  9.27767555 | 2021-12-08 00:31:54.338896
         1 | 121.92 | 18.55398159 | 2021-12-08 00:31:54.415614
         1 | 121.91 | 13.11019084 | 2021-12-08 00:31:54.489903
         1 | 121.92 |         3.5 | 2021-12-08 00:31:54.51547
         1 | 121.91 | 13.11019084 | 2021-12-08 00:31:55.322891
         1 | 121.92 |      0.9955 | 2021-12-08 00:32:01.875342
         1 | 121.95 |  2.53252478 | 2021-12-08 00:32:01.922249
         1 | 121.96 |         3.5 | 2021-12-08 00:32:01.99249
         1 | 121.99 |  9.27562065 | 2021-12-08 00:32:02.010076
         1 |    122 |         3.5 | 2021-12-08 00:32:02.063832
         1 | 122.03 |  2.17827867 | 2021-12-08 00:32:02.183087
         1 |    122 |         3.5 | 2021-12-08 00:32:02.366137
         1 | 122.02 |   9.2734012 | 2021-12-08 00:32:02.951335
         1 | 121.99 | 18.54674362 | 2021-12-08 00:32:03.621967
         1 | 121.98 |  2.17945751 | 2021-12-08 00:32:04.292851
         1 | 121.95 |  2.53252478 | 2021-12-08 00:32:04.305219
         1 | 121.92 |      0.9955 | 2021-12-08 00:32:04.306117
         1 | 122.01 |  9.27479154 | 2021-12-08 00:32:04.310481
         1 | 121.97 |  18.5506797 | 2021-12-08 00:32:04.519634
         1 | 121.98 |         3.5 | 2021-12-08 00:32:05.007274
         1 |    122 |  9.27583338 | 2021-12-08 00:32:05.260597
         1 | 121.97 |  18.5506797 | 2021-12-08 00:32:06.13599
         1 | 121.99 |  9.27643357 | 2021-12-08 00:32:06.171101
--More-- 
         1 | 121.95 | 21.11341502 | 2021-12-08 00:32:06.269793
--More-- 
         1 | 121.92 | 13.11019084 | 2021-12-08 00:32:06.375372
--More-- 
         1 | 121.91 |  2.61637883 | 2021-12-08 00:32:06.375455
--More-- 
         1 | 121.89 |      0.9955 | 2021-12-08 00:32:06.401381
--More-- 
         1 |  121.9 |  8.21221165 | 2021-12-08 00:32:06.42877
--More-- 
         1 | 121.91 |         3.5 | 2021-12-08 00:32:06.507573
--More-- 
         1 |  121.9 |  8.21221165 | 2021-12-08 00:32:08.973367
--More-- 
         1 | 121.85 |  2.28577843 | 2021-12-08 00:32:10.488178
--More-- 
         1 | 121.79 | 38.24154134 | 2021-12-08 00:32:10.504964
--More-- 
         1 |  121.8 |      0.9955 | 2021-12-08 00:32:10.513707
--More-- 
         1 | 121.85 |  8.21558146 | 2021-12-08 00:32:10.515837
--More-- 
         1 | 121.81 |  9.28864195 | 2021-12-08 00:32:14.825165
--More-- 
         1 |  121.8 |         3.5 | 2021-12-08 00:32:15.570329
--More-- 
         1 | 121.79 | 47.53101379 | 2021-12-08 00:32:15.677456
--More-- 
         1 |  121.8 |         3.5 | 2021-12-08 00:32:15.885807
--More-- 
         1 | 121.81 |  0.00466696 | 2021-12-08 00:32:16.694124
--More-- 


         1 | 121.75 | 20.96662888 | 2021-12-08 00:32:17.635597
         1 | 121.76 |  0.00466696 | 2021-12-08 00:32:17.648441
         1 |  121.7 |      0.9955 | 2021-12-08 00:32:17.656353
--More-- 
         1 | 121.74 | 11.31185905 | 2021-12-08 00:32:17.660459
--More-- 
         1 | 121.76 |  9.29133053 | 2021-12-08 00:32:17.670752
--More-- 
         1 | 121.77 |  0.00466696 | 2021-12-08 00:32:17.674193
--More-- 
         1 | 121.78 |  0.00466696 | 2021-12-08 00:32:17.710448
--More-- 
         1 | 121.73 | 18.58266105 | 2021-12-08 00:32:18.133294
--More-- 
         1 | 121.71 |  2.24959344 | 2021-12-08 00:32:18.133452
--More-- 
         1 | 121.74 |  0.00466696 | 2021-12-08 00:32:18.149226
--More-- 
         1 |  121.7 | 20.43551293 | 2021-12-08 00:32:18.187846
--More-- 
         1 | 121.71 |  0.00466696 | 2021-12-08 00:32:18.196194
--More-- 
         1 | 121.72 |  0.00466696 | 2021-12-08 00:32:18.242486
--More-- 
         1 | 121.68 | 41.05221241 | 2021-12-08 00:32:18.55077
--More-- 
         1 | 121.69 |  0.00466696 | 2021-12-08 00:32:18.566287
--More-- 
         1 |  121.7 |  9.29558394 | 2021-12-08 00:32:18.696238
--More-- 
         1 | 121.71 |  0.00466696 | 2021-12-08 00:32:18.714985
--More-- 
         1 | 121.72 |  0.00466696 | 2021-12-08 00:32:19.616971
--More-- 
         1 | 121.73 |      0.9955 | 2021-12-08 00:32:19.87388
--More-- 
         1 | 121.75 |   9.2918967 | 2021-12-08 00:32:21.191299
--More-- 
         1 | 121.76 |  0.00677138 | 2021-12-08 00:32:21.212099
--More-- 
         1 | 121.72 |  2.38413272 | 2021-12-08 00:32:21.232558
--More-- 
         1 | 121.73 |  0.00677138 | 2021-12-08 00:32:21.236788
--More-- 
         1 | 121.74 |  0.00677138 | 2021-12-08 00:32:22.780784
--More-- 
         1 | 121.75 |         3.5 | 2021-12-08 00:32:23.984296
--More-- 
         1 | 121.76 |  0.00561798 | 2021-12-08 00:32:24.001335
--More-- 
         1 | 121.77 |  0.00535857 | 2021-12-08 00:32:26.383089
--More-- 


         1 | 121.78 |  0.00535857 | 2021-12-08 00:32:26.438128
         1 | 121.75 |  9.29232403 | 2021-12-08 00:32:33.84764
         1 | 121.72 |  2.38413272 | 2021-12-08 00:32:33.896222
--More-- 
         1 | 121.69 |  2.28984354 | 2021-12-08 00:32:33.943513
--More-- 
         1 |  121.7 |         3.5 | 2021-12-08 00:32:33.988124
--More-- 
         1 | 121.72 |  2.42818023 | 2021-12-08 00:32:42.555234
--More-- 
         1 | 121.73 |         3.5 | 2021-12-08 00:32:42.576867
--More-- 
         1 | 121.74 |  9.29314136 | 2021-12-08 00:32:42.622764
--More-- 
         1 | 121.75 |         3.5 | 2021-12-08 00:32:42.645
--More-- 
         1 | 121.74 |  9.29391782 | 2021-12-08 00:32:47.081375
--More-- 
         1 | 121.72 |  2.42818023 | 2021-12-08 00:32:47.522925
--More-- 
         1 |  121.7 | 18.58873148 | 2021-12-08 00:32:47.52337
--More-- 
         1 | 121.71 |         3.5 | 2021-12-08 00:32:47.566345
--More-- 
         1 | 121.72 |  9.29553126 | 2021-12-08 00:32:48.12589
--More-- 
         1 | 121.73 |         3.5 | 2021-12-08 00:32:50.290955
--More-- 
         1 | 121.76 |  2.26039446 | 2021-12-08 00:32:51.223759
--More-- 
         1 | 121.77 |         3.5 | 2021-12-08 00:32:51.258466
--More-- 
         1 | 121.79 |  2.63181284 | 2021-12-08 00:33:05.928467
--More-- 
         1 |  121.8 |      0.9955 | 2021-12-08 00:33:06.005251
--More-- 
         1 | 121.82 |  2.57674751 | 2021-12-08 00:33:06.134879
--More-- 
         1 | 121.83 |         3.5 | 2021-12-08 00:33:06.168493
--More-- 
         1 | 121.85 |  2.45424963 | 2021-12-08 00:33:06.3004
--More-- 
         1 | 121.86 |         3.5 | 2021-12-08 00:33:06.31749
--More-- 
         1 | 121.83 |         3.5 | 2021-12-08 00:33:10.019178
--More-- 
         1 | 121.82 | 21.15151349 | 2021-12-08 00:33:10.049822
--More-- 
(100 rows)
--More-- 
         
level4=# 



level4=# 
level4=# 
level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               2 |           1 | SPOT
  2 |               3 |               2 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
  4 |               1 |               4 |           1 | SPOT
  5 |               5 |               4 |           1 | SPOT
  6 |               5 |               2 |           1 | SPOT
  7 |               3 |               6 |           2 | SPOT
  8 |               5 |               6 |           2 | SPOT
  9 |               1 |               6 |           2 | SPOT
(9 rows)

level4=# select count(*) from best_bid_prices where market_id = 8;
select count(*) from best_bid_prices where market_id = 5;
 count 
-------
 32556
(1 row)

level4=# select count(*) from best_bid_prices where market_id = 1;
select count(*) from best_bid_prices where market_id = 8;
 count 
-------
  2187
(1 row)

level4=# select * from symbols ;
select * from symbols ;
 id | symbol 
----+--------
  1 | LTC
  2 | GBP
  3 | BTC
  4 | USD
  5 | ETH
  6 | USDT
(6 rows)

level4=# 

level4=# select count(*) from best_bid_prices where market_id = 2;
select count(*) from best_bid_prices where market_id = 1;
 count 
-------
  4006
(1 row)

level4=# select count(*) from best_bid_prices where market_id = 4;
select count(*) from best_bid_prices where market_id = 2;
 count 
-------
  9579
(1 row)

level4=# select count(*) from best_bid_prices where market_id = 6;
select count(*) from best_bid_prices where market_id = 4;
 count 
-------
  7295
(1 row)

level4=# select count(*) from best_bid_prices where market_id = 6;
select count(*) from best_bid_prices where market_id = 6;
 count 
-------
  8572
(1 row)

level4=# \l+
\l+
                                                                List of databases
   Name    | Owner  | Encoding |  Collate   |   Ctype    | Access privileges |  Size   | Tablespace |                Description                 
-----------+--------+----------+------------+------------+-------------------+---------+------------+--------------------------------------------
 level4    | level4 | UTF8     | en_US.utf8 | en_US.utf8 |                   | 35 MB   | pg_default | 
 postgres  | level4 | UTF8     | en_US.utf8 | en_US.utf8 |                   | 9233 kB | pg_default | default administrative connection database
 template0 | level4 | UTF8     | en_US.utf8 | en_US.utf8 | =c/level4        +| 7825 kB | pg_default | unmodifiable empty database
           |        |          |            |            | level4=CTc/level4 |         |            | 
 template1 | level4 | UTF8     | en_US.utf8 | en_US.utf8 | =c/level4        +| 9241 kB | pg_default | default template for new databases
           |        |          |            |            | level4=CTc/level4 |         |            | 
(4 rows)

level4=# 

level4=# select count(*) from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               2 |           1 | SPOT
  2 |               3 |               2 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
  4 |               1 |               4 |           1 | SPOT
  5 |               5 |               4 |           1 | SPOT
  6 |               5 |               2 |           1 | SPOT
  7 |               3 |               6 |           2 | SPOT
  8 |               5 |               6 |           2 | SPOT
  9 |               1 |               6 |           2 | SPOT
(9 rows)

level4=# select count(*) from markets ;
select count(*) from markets ;
 count 
-------
     9
(1 row)

level4=# select count(*) from best_bid_prices ;
select count(*) from best_bid_prices ;
 count  
--------
 110863
(1 row)

level4=# select count(*) from best_ask_prices ;
select count(*) from best_ask_prices ;
 count  
--------
 102552
(1 row)

level4=# select count(*) from best_bid_prices ;
select count(*) from best_bid_prices ;
 count  
--------
 130730
(1 row)

level4=# select count(*) from best_bid_prices ;
select count(*) from best_bid_prices ;
 count  
--------
 150594
(1 row)

level4=# select time_bucket('1 minute', timestamp) as minute from best_bid_prices where market_id = 3 and timestamp > now() - interval '30m' group by minute order by minute asc ;
select time_bucket('1 minute', timestamp) as minute from best_bid_prices where market_id = 2 and timestamp > now() - interval '30m' group by minute order by minute asc ;
       minute        
---------------------
 2021-12-08 01:37:00
 2021-12-08 01:38:00
 2021-12-08 01:39:00
 2021-12-08 01:40:00
 2021-12-08 01:41:00
 2021-12-08 01:42:00
 2021-12-08 01:43:00
 2021-12-08 01:44:00
 2021-12-08 01:45:00
 2021-12-08 01:46:00
 2021-12-08 01:47:00
 2021-12-08 01:48:00
 2021-12-08 01:49:00
 2021-12-08 01:50:00
 2021-12-08 01:51:00
 2021-12-08 01:52:00
 2021-12-08 01:53:00
 2021-12-08 01:54:00
 2021-12-08 01:55:00
 2021-12-08 01:56:00
 2021-12-08 01:57:00
 2021-12-08 01:58:00
 2021-12-08 01:59:00
 2021-12-08 02:00:00
 2021-12-08 02:01:00
 2021-12-08 02:02:00
 2021-12-08 02:03:00
 2021-12-08 02:04:00
 2021-12-08 02:05:00
 2021-12-08 02:06:00
 2021-12-08 02:07:00
(31 rows)

level4=# 

level4=# 

level4=# select * from symbols ;
select * from symbols ;
 id | symbol 
----+--------
  1 | LTC
  2 | GBP
  3 | BTC
  4 | USD
  5 | ETH
  6 | USDT
(6 rows)

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               2 |           1 | SPOT
  2 |               3 |               2 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
  4 |               1 |               4 |           1 | SPOT
  5 |               5 |               4 |           1 | SPOT
  6 |               5 |               2 |           1 | SPOT
  7 |               3 |               6 |           2 | SPOT
  8 |               5 |               6 |           2 | SPOT
  9 |               1 |               6 |           2 | SPOT
(9 rows)

level4=# select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price, timestamp) as high, min(price, timestamp) as low, avg(price, timestamp) as avg,  from best_bid_prices where market_id = 3 and timestamp > now() - interval '30m' group by minute order by minute asc ;
select time_bucket('1 minute', timestamp) as minute from best_bid_prices where market_id = 3 and timestamp > now() - interval '30m' group by minute order by minute asc ;
       minute        
---------------------
 2021-12-08 01:38:00
 2021-12-08 01:39:00
 2021-12-08 01:40:00
 2021-12-08 01:41:00
 2021-12-08 01:42:00
 2021-12-08 01:43:00
 2021-12-08 01:44:00
 2021-12-08 01:45:00
 2021-12-08 01:46:00
 2021-12-08 01:47:00
 2021-12-08 01:48:00
 2021-12-08 01:49:00
 2021-12-08 01:50:00
 2021-12-08 01:51:00
 2021-12-08 01:52:00
 2021-12-08 01:53:00
 2021-12-08 01:54:00
 2021-12-08 01:55:00
 2021-12-08 01:56:00
 2021-12-08 01:57:00
 2021-12-08 01:58:00
 2021-12-08 01:59:00
 2021-12-08 02:00:00
 2021-12-08 02:01:00
 2021-12-08 02:02:00
 2021-12-08 02:03:00
 2021-12-08 02:04:00
 2021-12-08 02:05:00
 2021-12-08 02:06:00
 2021-12-08 02:07:00
 2021-12-08 02:08:00
(31 rows)

level4=# 

level4=# 

level4=# select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price, timestamp) as high, min(price, timestamp) as low, avg(price, timestamp) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '30m' group by minute order by minute asc ;
select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price, timestamp) as high, min(price, timestamp) as low, avg(price, timestamp) as avg,  from best_bid_prices where market_id = 3 and timestamp > now() - interval '30m' group by minute order by minute asc ;
ERROR:  syntax error at or near "from"
LINE 1: ...timestamp) as low, avg(price, timestamp) as avg,  from best_...
                                                             ^
level4=# select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price, timestamp) as high, min(price, timestamp) as low, avg(price, timestamp) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '30m' group by minute order by minute asc ;
select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price, timestamp) as high, min(price, timestamp) as low, avg(price, timestamp) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '30m' group by minute order by minute asc ;
ERROR:  function max(double precision, timestamp without time zone) does not exist
LINE 1: ...estamp) as open, last(price, timestamp) as close, max(price,...
                                                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
level4=# 

level4=# select * from best_bid_prices limit 10 ;
select * from best_bid_prices limit 10 ;
 market_id | price  |    size     |         timestamp          
-----------+--------+-------------+----------------------------
         1 | 121.96 |         3.5 | 2021-12-08 00:31:39.913589
         1 | 121.97 |      0.9955 | 2021-12-08 00:31:40.82103
         1 | 121.98 |         3.5 | 2021-12-08 00:31:40.853845
         1 | 121.99 |      0.9955 | 2021-12-08 00:31:40.909144
         1 |    122 |         3.5 | 2021-12-08 00:31:40.963028
         1 | 121.98 |         3.5 | 2021-12-08 00:31:48.728648
         1 | 121.95 | 52.47925118 | 2021-12-08 00:31:49.43994
         1 | 121.96 |         3.5 | 2021-12-08 00:31:49.551163
         1 | 121.92 | 18.55398159 | 2021-12-08 00:31:54.324723
         1 | 121.95 |  9.27767555 | 2021-12-08 00:31:54.338896
(10 rows)

level4=# 

level4=# 

level4=# select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg,  from best_bid_prices where market_id = 3 and timestamp > now() - interval '30m' group by minute order by minute asc ;
select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg,  from best_bid_prices where market_id = 3 and timestamp > now() - interval '30m' group by minute order by minute asc ;
ERROR:  syntax error at or near "from"
LINE 1: ...) as high, min(price) as low, avg(price) as avg,  from best_...
                                                             ^
level4=# select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '30m' group by minute order by minute asc ;
select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '30m' group by minute order by minute asc ;
       minute        |   open   |  close   |   high   |   low    |        avg         
---------------------+----------+----------+----------+----------+--------------------
 2021-12-08 01:44:00 | 50513.26 | 50515.59 | 50522.14 | 50509.46 |      50517.0146875
 2021-12-08 01:45:00 |  50515.6 | 50505.18 |  50558.5 |    50500 |   50522.4754713493
 2021-12-08 01:46:00 | 50505.73 | 50466.73 | 50505.89 |    50450 |   50464.4955093257
 2021-12-08 01:47:00 | 50470.76 | 50453.06 | 50479.39 | 50450.99 |   50460.5267114094
 2021-12-08 01:48:00 | 50453.07 | 50469.37 | 50478.56 | 50436.51 |  50456.02561643835
 2021-12-08 01:49:00 | 50469.38 | 50519.57 | 50519.57 |  50457.9 |  50476.34584245073
 2021-12-08 01:50:00 | 50519.56 |  50467.4 | 50519.56 | 50444.24 |  50469.33233830847
 2021-12-08 01:51:00 |  50468.7 |  50492.4 | 50495.46 | 50451.37 |  50472.14017361115
 2021-12-08 01:52:00 | 50493.11 | 50423.46 | 50494.92 | 50423.46 | 50453.327612524445
 2021-12-08 01:53:00 | 50423.47 | 50439.36 | 50447.59 | 50423.45 | 50437.174829396274
 2021-12-08 01:54:00 | 50439.35 | 50427.74 | 50455.38 | 50424.43 | 50435.210526315714
 2021-12-08 01:55:00 |  50428.2 | 50420.69 | 50432.87 |  50396.5 |  50416.27682509504
 2021-12-08 01:56:00 | 50421.96 | 50443.16 | 50467.85 | 50417.21 |  50441.33090196074
 2021-12-08 01:57:00 | 50443.17 | 50457.67 | 50470.04 | 50439.76 | 50458.362549019635
 2021-12-08 01:58:00 | 50458.24 | 50450.46 | 50482.25 | 50447.87 |  50463.27987915408
 2021-12-08 01:59:00 | 50450.49 | 50474.93 | 50478.32 | 50439.78 |  50457.62640625003
 2021-12-08 02:00:00 | 50474.83 | 50490.05 |  50498.6 | 50455.91 |  50475.49134615383
 2021-12-08 02:01:00 | 50488.41 | 50491.48 | 50499.99 | 50453.35 |  50480.98388586956
 2021-12-08 02:02:00 | 50491.49 | 50509.55 | 50514.33 | 50490.77 |  50500.96647058823
 2021-12-08 02:03:00 | 50509.56 | 50502.63 |  50521.1 | 50492.15 |  50508.24287104625
 2021-12-08 02:04:00 | 50504.29 | 50547.04 | 50547.04 | 50477.87 |  50507.35812217192
 2021-12-08 02:05:00 | 50547.35 | 50555.89 | 50572.12 | 50539.59 |  50557.15171270711
 2021-12-08 02:06:00 |  50555.9 | 50512.45 |  50555.9 | 50504.05 |  50514.56914855075
 2021-12-08 02:07:00 | 50512.46 | 50580.93 | 50585.69 | 50512.46 | 50559.684352941214
 2021-12-08 02:08:00 | 50580.94 | 50558.64 | 50582.83 | 50553.18 |   50567.5066157761
 2021-12-08 02:09:00 | 50558.71 |  50572.9 | 50587.37 | 50557.74 |  50571.84410788381
 2021-12-08 02:10:00 |  50570.6 | 50548.22 |  50570.6 | 50540.68 |  50555.55250000005
 2021-12-08 02:11:00 | 50548.21 | 50558.03 | 50559.99 | 50541.96 |  50551.10255555553
 2021-12-08 02:12:00 |  50558.7 | 50565.23 |  50572.9 |    50555 |  50564.27121527773
 2021-12-08 02:13:00 |  50564.6 | 50623.21 |  50625.8 | 50555.49 | 50595.928121951234
 2021-12-08 02:14:00 | 50623.22 | 50623.55 | 50649.99 |    50618 |  50628.66793333332
(31 rows)

level4=# select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '60m' group by minute order by minute asc ;
select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '60m' group by minute order by minute asc ;
       minute        |   open   |  close   |   high   |   low    |        avg         
---------------------+----------+----------+----------+----------+--------------------
 2021-12-08 01:15:00 | 50755.08 | 50748.63 | 50764.96 | 50743.12 |  50753.71282511215
 2021-12-08 01:16:00 | 50748.64 | 50755.52 | 50760.49 | 50733.38 |  50743.29377777773
 2021-12-08 01:17:00 | 50755.51 | 50731.75 | 50761.76 | 50731.65 |  50747.57411016952
 2021-12-08 01:18:00 | 50732.55 | 50746.67 | 50756.38 | 50708.76 | 50738.602876344055
 2021-12-08 01:19:00 | 50746.95 | 50783.65 | 50798.13 | 50744.68 |  50771.71397637798
 2021-12-08 01:20:00 | 50783.63 | 50795.55 | 50795.55 | 50744.68 |  50766.30832031253
 2021-12-08 01:21:00 | 50786.25 | 50773.29 |  50804.2 | 50766.26 |  50783.09258426969
 2021-12-08 01:22:00 | 50772.37 | 50816.95 | 50835.18 |  50771.9 |  50805.10581333329
 2021-12-08 01:23:00 | 50812.77 | 50810.59 | 50825.11 | 50806.12 |  50813.04980722895
 2021-12-08 01:24:00 | 50810.92 | 50765.34 | 50810.92 | 50755.81 |  50778.69688235289
 2021-12-08 01:25:00 | 50765.35 | 50770.03 | 50775.99 | 50765.23 | 50770.725591397866
 2021-12-08 01:26:00 | 50769.28 | 50750.26 | 50769.28 | 50730.41 |  50744.04091428568
 2021-12-08 01:27:00 | 50750.27 | 50746.98 | 50772.61 | 50744.66 |  50750.69905759177
 2021-12-08 01:28:00 | 50748.48 | 50740.59 | 50748.81 | 50712.04 |  50728.54392271652
 2021-12-08 01:29:00 | 50740.57 | 50716.85 | 50743.43 | 50711.42 | 50721.683931357315
 2021-12-08 01:30:00 | 50718.12 | 50692.61 | 50760.29 | 50661.07 | 50708.596699507405
 2021-12-08 01:31:00 | 50692.99 | 50705.35 | 50724.35 | 50692.99 |   50708.6878508772
 2021-12-08 01:32:00 | 50705.11 | 50651.12 | 50707.11 | 50636.68 |  50666.96795724462
 2021-12-08 01:33:00 | 50651.13 | 50632.06 | 50657.89 | 50625.78 |  50636.17106666663
 2021-12-08 01:34:00 | 50632.14 | 50599.83 | 50646.39 | 50579.54 | 50616.416572580616
 2021-12-08 01:35:00 | 50601.73 | 50592.53 | 50635.09 | 50588.14 |  50614.35414847167
 2021-12-08 01:36:00 | 50589.78 | 50553.05 | 50591.88 | 50553.05 |  50574.95312775332
 2021-12-08 01:37:00 | 50553.12 | 50599.82 | 50616.18 | 50553.12 |  50583.39400000014
 2021-12-08 01:38:00 | 50593.04 | 50535.35 | 50600.48 | 50507.14 | 50543.446028368766
 2021-12-08 01:39:00 | 50535.34 | 50505.07 | 50539.87 | 50505.06 |  50516.40386541481
 2021-12-08 01:40:00 | 50505.11 | 50538.75 | 50538.94 | 50502.14 | 50516.018552123496
 2021-12-08 01:41:00 | 50538.74 | 50472.19 | 50538.74 | 50463.14 |  50501.44390624998
 2021-12-08 01:42:00 | 50477.07 | 50504.67 | 50512.72 | 50468.56 |  50492.66475728158
 2021-12-08 01:43:00 | 50504.66 | 50505.76 | 50518.11 | 50487.45 | 50501.557470588225
 2021-12-08 01:44:00 | 50505.77 | 50515.59 | 50522.14 | 50496.61 |   50507.1739018088
 2021-12-08 01:45:00 |  50515.6 | 50505.18 |  50558.5 |    50500 |   50522.4754713493
 2021-12-08 01:46:00 | 50505.73 | 50466.73 | 50505.89 |    50450 |   50464.4955093257
 2021-12-08 01:47:00 | 50470.76 | 50453.06 | 50479.39 | 50450.99 |   50460.5267114094
 2021-12-08 01:48:00 | 50453.07 | 50469.37 | 50478.56 | 50436.51 |  50456.02561643835
 2021-12-08 01:49:00 | 50469.38 | 50519.57 | 50519.57 |  50457.9 |  50476.34584245073
 2021-12-08 01:50:00 | 50519.56 |  50467.4 | 50519.56 | 50444.24 |  50469.33233830847
 2021-12-08 01:51:00 |  50468.7 |  50492.4 | 50495.46 | 50451.37 |  50472.14017361115
 2021-12-08 01:52:00 | 50493.11 | 50423.46 | 50494.92 | 50423.46 | 50453.327612524445
 2021-12-08 01:53:00 | 50423.47 | 50439.36 | 50447.59 | 50423.45 | 50437.174829396274
 2021-12-08 01:54:00 | 50439.35 | 50427.74 | 50455.38 | 50424.43 | 50435.210526315714
 2021-12-08 01:55:00 |  50428.2 | 50420.69 | 50432.87 |  50396.5 |  50416.27682509504
 2021-12-08 01:56:00 | 50421.96 | 50443.16 | 50467.85 | 50417.21 |  50441.33090196074
 2021-12-08 01:57:00 | 50443.17 | 50457.67 | 50470.04 | 50439.76 | 50458.362549019635
 2021-12-08 01:58:00 | 50458.24 | 50450.46 | 50482.25 | 50447.87 |  50463.27987915408
 2021-12-08 01:59:00 | 50450.49 | 50474.93 | 50478.32 | 50439.78 |  50457.62640625003
 2021-12-08 02:00:00 | 50474.83 | 50490.05 |  50498.6 | 50455.91 |  50475.49134615383
 2021-12-08 02:01:00 | 50488.41 | 50491.48 | 50499.99 | 50453.35 |  50480.98388586956
 2021-12-08 02:02:00 | 50491.49 | 50509.55 | 50514.33 | 50490.77 |  50500.96647058823
 2021-12-08 02:03:00 | 50509.56 | 50502.63 |  50521.1 | 50492.15 |  50508.24287104625
 2021-12-08 02:04:00 | 50504.29 | 50547.04 | 50547.04 | 50477.87 |  50507.35812217192
--More-- 
 2021-12-08 02:05:00 | 50547.35 | 50555.89 | 50572.12 | 50539.59 |  50557.15171270711
--More-- 
 2021-12-08 02:06:00 |  50555.9 | 50512.45 |  50555.9 | 50504.05 |  50514.56914855075
--More-- 
 2021-12-08 02:07:00 | 50512.46 | 50580.93 | 50585.69 | 50512.46 | 50559.684352941214
--More-- 
 2021-12-08 02:08:00 | 50580.94 | 50558.64 | 50582.83 | 50553.18 |   50567.5066157761
--More-- 
 2021-12-08 02:09:00 | 50558.71 |  50572.9 | 50587.37 | 50557.74 |  50571.84410788381
--More-- 

 2021-12-08 02:10:00 |  50570.6 | 50548.22 |  50570.6 | 50540.68 |  50555.55250000005
 2021-12-08 02:11:00 | 50548.21 | 50558.03 | 50559.99 | 50541.96 |  50551.10255555553
--More-- 
 2021-12-08 02:12:00 |  50558.7 | 50565.23 |  50572.9 |    50555 |  50564.27121527773
--More-- 
 2021-12-08 02:13:00 |  50564.6 | 50623.21 |  50625.8 | 50555.49 | 50595.928121951234
--More-- 
 2021-12-08 02:14:00 | 50623.22 | 50633.74 | 50649.99 |    50618 |  50629.35288683599
--More-- 

 2021-12-08 02:15:00 | 50629.91 | 50632.43 | 50638.86 | 50629.91 |  50631.98866666667
(61 rows)
--More-- 
         
level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# select price as best_bid, price as best_ask from best_bid_prices inner join best_ask_prices on best_bid_prices.market_id == best_ask_prices.market_id ;
select price as best_bid, price as best_ask from best_bid_prices inner join best_ask_prices join on market_id ;
ERROR:  syntax error at or near "on"
LINE 1: ...m best_bid_prices inner join best_ask_prices join on market_...
                                                             ^
level4=# select price as best_bid, price as best_ask from best_bid_prices inner join best_ask_prices on best_bid_prices.market_id = best_ask_prices.market_id ;
select price as best_bid, price as best_ask from best_bid_prices inner join best_ask_prices on best_bid_prices.market_id == best_ask_prices.market_id ;
ERROR:  operator does not exist: bigint == bigint
LINE 1: ...join best_ask_prices on best_bid_prices.market_id == best_as...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
level4=# 

level4=# 

level4=# select best_bid_prices.price as best_bid, best_ask_prices.price as best_ask from best_bid_prices inner join best_ask_prices on best_bid_prices.market_id = best_ask_prices.market_id ;
select price as best_bid, price as best_ask from best_bid_prices inner join best_ask_prices on best_bid_prices.market_id = best_ask_prices.market_id ;
ERROR:  column reference "price" is ambiguous
LINE 1: select price as best_bid, price as best_ask from best_bid_pr...
               ^
level4=# select best_bid_prices.price as best_bid, best_ask_prices.price as best_ask from best_bid_prices inner join best_ask_prices on best_bid_prices.market_id = best_ask_prices.market_id ;
select best_bid_prices.price as best_bid, best_ask_prices.price as best_ask from best_bid_prices inner join best_ask_prices on best_bid_prices.market_id = best_ask_prices.market_id limit 10 ;


  C-c C-c^CCancel request sent
ERROR:  canceling statement due to user request
level4=# select best_bid_prices.price as best_bid, best_ask_prices.price as best_ask from best_bid_prices inner join best_ask_prices on best_bid_prices.market_id = best_ask_prices.market_id limit 10 ;
select best_bid_prices.price as best_bid, best_ask_prices.price as best_ask from best_bid_prices inner join best_ask_prices on best_bid_prices.market_id = best_ask_prices.market_id limit 10 ;
 best_bid | best_ask 
----------+----------
   121.96 |   122.05
   121.96 |   122.06
   121.96 |   122.09
   121.96 |   122.12
   121.96 |   122.11
   121.96 |   122.12
   121.96 |   122.14
   121.96 |   122.15
   121.96 |   122.14
   121.96 |   122.12
(10 rows)

level4=# 

level4=# 

level4=# select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '30m' group by minute order by minute asc ;
select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '120m' group by minute order by minute asc ;
       minute        |   open   |  close   |   high   |   low    |        avg         
---------------------+----------+----------+----------+----------+--------------------
 2021-12-08 01:50:00 |  50455.4 |  50467.4 |  50468.7 | 50444.24 |  50455.92767123288
 2021-12-08 01:51:00 |  50468.7 |  50492.4 | 50495.46 | 50451.37 |  50472.14017361115
 2021-12-08 01:52:00 | 50493.11 | 50423.46 | 50494.92 | 50423.46 | 50453.327612524445
 2021-12-08 01:53:00 | 50423.47 | 50439.36 | 50447.59 | 50423.45 | 50437.174829396274
 2021-12-08 01:54:00 | 50439.35 | 50427.74 | 50455.38 | 50424.43 | 50435.210526315714
 2021-12-08 01:55:00 |  50428.2 | 50420.69 | 50432.87 |  50396.5 |  50416.27682509504
 2021-12-08 01:56:00 | 50421.96 | 50443.16 | 50467.85 | 50417.21 |  50441.33090196074
 2021-12-08 01:57:00 | 50443.17 | 50457.67 | 50470.04 | 50439.76 | 50458.362549019635
 2021-12-08 01:58:00 | 50458.24 | 50450.46 | 50482.25 | 50447.87 |  50463.27987915408
 2021-12-08 01:59:00 | 50450.49 | 50474.93 | 50478.32 | 50439.78 |  50457.62640625003
 2021-12-08 02:00:00 | 50474.83 | 50490.05 |  50498.6 | 50455.91 |  50475.49134615383
 2021-12-08 02:01:00 | 50488.41 | 50491.48 | 50499.99 | 50453.35 |  50480.98388586956
 2021-12-08 02:02:00 | 50491.49 | 50509.55 | 50514.33 | 50490.77 |  50500.96647058823
 2021-12-08 02:03:00 | 50509.56 | 50502.63 |  50521.1 | 50492.15 |  50508.24287104625
 2021-12-08 02:04:00 | 50504.29 | 50547.04 | 50547.04 | 50477.87 |  50507.35812217192
 2021-12-08 02:05:00 | 50547.35 | 50555.89 | 50572.12 | 50539.59 |  50557.15171270711
 2021-12-08 02:06:00 |  50555.9 | 50512.45 |  50555.9 | 50504.05 |  50514.56914855075
 2021-12-08 02:07:00 | 50512.46 | 50580.93 | 50585.69 | 50512.46 | 50559.684352941214
 2021-12-08 02:08:00 | 50580.94 | 50558.64 | 50582.83 | 50553.18 |   50567.5066157761
 2021-12-08 02:09:00 | 50558.71 |  50572.9 | 50587.37 | 50557.74 |  50571.84410788381
 2021-12-08 02:10:00 |  50570.6 | 50548.22 |  50570.6 | 50540.68 |  50555.55250000005
 2021-12-08 02:11:00 | 50548.21 | 50558.03 | 50559.99 | 50541.96 |  50551.10255555553
 2021-12-08 02:12:00 |  50558.7 | 50565.23 |  50572.9 |    50555 |  50564.27121527773
 2021-12-08 02:13:00 |  50564.6 | 50623.21 |  50625.8 | 50555.49 | 50595.928121951234
 2021-12-08 02:14:00 | 50623.22 | 50633.74 | 50649.99 |    50618 |  50629.35288683599
 2021-12-08 02:15:00 | 50629.91 | 50555.75 | 50638.86 |  50555.7 |  50605.54908045974
 2021-12-08 02:16:00 |  50555.7 | 50557.37 | 50573.86 | 50514.82 |  50537.04697986579
 2021-12-08 02:17:00 | 50557.38 |  50605.2 | 50630.22 | 50557.38 |  50599.95702359339
 2021-12-08 02:18:00 | 50602.42 | 50600.49 | 50609.08 | 50564.06 |  50589.82678770952
 2021-12-08 02:19:00 | 50600.05 | 50537.26 | 50600.06 | 50535.56 |  50561.33505720823
 2021-12-08 02:20:00 | 50533.88 | 50519.88 | 50537.43 | 50514.77 |  50528.67264264268
(31 rows)

level4=# select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '120m' group by minute order by minute asc ;
select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '120m' group by minute order by minute asc ;
       minute        |   open   |  close   |   high   |   low    |        avg         
---------------------+----------+----------+----------+----------+--------------------
 2021-12-08 00:34:00 | 50579.59 | 50641.35 | 50647.87 | 50579.59 | 50627.996045751715
 2021-12-08 00:35:00 | 50641.36 | 50720.47 | 50720.47 | 50638.24 |  50687.19361990959
 2021-12-08 00:36:00 | 50721.26 | 50738.11 | 50742.35 | 50671.88 | 50716.351904761876
 2021-12-08 00:37:00 | 50740.87 | 50726.38 | 50745.02 | 50697.67 |  50726.78179894185
 2021-12-08 00:38:00 | 50726.37 | 50758.22 | 50787.68 | 50711.68 |  50758.53186615192
 2021-12-08 00:39:00 | 50757.64 | 50729.15 | 50786.43 | 50718.17 | 50753.136486988784
 2021-12-08 00:40:00 | 50729.74 | 50670.63 |  50749.5 | 50665.56 |  50705.66861538462
 2021-12-08 00:41:00 | 50671.65 | 50684.98 | 50688.03 | 50632.33 |  50651.57514431232
 2021-12-08 00:42:00 | 50684.97 | 50688.42 | 50688.42 | 50647.16 |  50668.81890510948
 2021-12-08 00:43:00 | 50688.43 | 50699.89 | 50743.14 | 50688.43 |  50719.48397459161
 2021-12-08 00:44:00 | 50699.93 | 50729.17 | 50741.64 | 50680.62 |  50717.08622905024
 2021-12-08 00:45:00 | 50728.39 | 50715.54 | 50732.81 | 50680.62 |  50698.39767676764
 2021-12-08 00:46:00 | 50715.56 |  50655.3 | 50716.14 | 50654.68 |  50680.57939172749
 2021-12-08 00:47:00 | 50660.85 | 50704.82 | 50728.49 | 50651.33 |  50679.67647840531
 2021-12-08 00:48:00 | 50703.76 | 50682.18 | 50707.36 | 50654.14 | 50687.367020547885
 2021-12-08 00:49:00 | 50675.33 | 50697.81 | 50699.24 | 50654.02 | 50675.441706422025
 2021-12-08 00:50:00 | 50695.72 | 50672.68 | 50702.48 | 50659.73 |  50684.22043010758
 2021-12-08 00:51:00 | 50679.35 | 50666.36 | 50679.35 | 50651.33 |   50659.2832249322
 2021-12-08 00:52:00 | 50659.57 | 50646.58 | 50670.06 | 50633.06 |  50646.74953987735
 2021-12-08 00:53:00 | 50646.59 | 50620.45 | 50649.99 | 50613.55 |  50632.55930434785
 2021-12-08 00:54:00 |    50620 | 50644.38 | 50644.38 | 50608.46 |  50628.86902597405
 2021-12-08 00:55:00 | 50645.22 | 50708.22 | 50722.68 | 50645.22 |  50689.59070224721
 2021-12-08 00:56:00 | 50708.27 | 50694.15 | 50712.13 | 50659.36 | 50685.059320557535
 2021-12-08 00:57:00 | 50690.45 |  50685.3 | 50724.49 | 50681.57 | 50703.773670329654
 2021-12-08 00:58:00 | 50685.28 | 50706.17 | 50735.02 | 50681.57 |  50710.17678284192
 2021-12-08 00:59:00 | 50706.38 | 50772.75 | 50772.75 | 50706.38 |  50733.89588957064
 2021-12-08 01:00:00 | 50767.23 | 50726.12 | 50770.39 | 50707.01 |   50730.2842093023
 2021-12-08 01:01:00 | 50727.39 | 50722.39 | 50765.46 |  50712.5 |  50730.53717741938
 2021-12-08 01:02:00 | 50722.79 | 50731.77 | 50731.77 | 50694.32 |   50708.1488478261
 2021-12-08 01:03:00 | 50731.79 |  50730.6 | 50734.42 | 50714.27 |  50725.70573333335
 2021-12-08 01:04:00 | 50726.12 | 50770.85 | 50784.11 | 50725.63 |  50746.90228744938
 2021-12-08 01:05:00 | 50771.07 | 50811.02 | 50827.18 | 50771.07 |  50803.23383977902
 2021-12-08 01:06:00 | 50809.92 | 50814.51 | 50827.33 | 50777.53 | 50810.073630705345
 2021-12-08 01:07:00 | 50812.28 | 50770.95 | 50817.18 | 50764.08 | 50787.244278283484
 2021-12-08 01:08:00 | 50767.22 | 50823.02 | 50837.88 | 50767.22 |  50808.42053949901
 2021-12-08 01:09:00 | 50820.29 | 50846.18 | 50848.99 |  50791.6 | 50818.657783783776
 2021-12-08 01:10:00 | 50842.23 | 50813.39 | 50846.77 | 50789.77 |  50812.18486348126
 2021-12-08 01:11:00 | 50813.42 | 50813.44 | 50838.87 | 50811.69 |  50822.52797583083
 2021-12-08 01:12:00 | 50812.74 | 50817.07 | 50822.19 | 50797.01 |  50814.86889221559
 2021-12-08 01:13:00 | 50817.66 | 50769.67 | 50829.64 | 50761.18 |  50792.66091743121
 2021-12-08 01:14:00 | 50769.64 | 50764.64 | 50770.45 | 50750.34 |  50760.28955555561
 2021-12-08 01:15:00 | 50764.63 | 50748.63 | 50764.96 | 50743.12 |  50753.96188679245
 2021-12-08 01:16:00 | 50748.64 | 50755.52 | 50760.49 | 50733.38 |  50743.29377777775
 2021-12-08 01:17:00 | 50755.51 | 50731.75 | 50761.76 | 50731.65 | 50747.574110169495
 2021-12-08 01:18:00 | 50732.55 | 50746.67 | 50756.38 | 50708.76 |  50738.60287634405
 2021-12-08 01:19:00 | 50746.95 | 50783.65 | 50798.13 | 50744.68 |  50771.71397637798
 2021-12-08 01:20:00 | 50783.63 | 50795.55 | 50795.55 | 50744.68 |  50766.30832031252
 2021-12-08 01:21:00 | 50786.25 | 50773.29 |  50804.2 | 50766.26 |  50783.09258426965
 2021-12-08 01:22:00 | 50772.37 | 50816.95 | 50835.18 |  50771.9 |  50805.10581333332
 2021-12-08 01:23:00 | 50812.77 | 50810.59 | 50825.11 | 50806.12 | 50813.049807228956
--More-- 
 2021-12-08 01:24:00 | 50810.92 | 50765.34 | 50810.92 | 50755.81 |  50778.69688235297
--More-- 
 2021-12-08 01:25:00 | 50765.35 | 50770.03 | 50775.99 | 50765.23 | 50770.725591397866
--More-- 
 2021-12-08 01:26:00 | 50769.28 | 50750.26 | 50769.28 | 50730.41 |  50744.04091428568
--More-- 
 2021-12-08 01:27:00 | 50750.27 | 50746.98 | 50772.61 | 50744.66 |  50750.69905759173
--More-- 
 2021-12-08 01:28:00 | 50748.48 | 50740.59 | 50748.81 | 50712.04 |  50728.54392271663
--More-- 
 2021-12-08 01:29:00 | 50740.57 | 50716.85 | 50743.43 | 50711.42 | 50721.683931357315
--More-- 
 2021-12-08 01:30:00 | 50718.12 | 50692.61 | 50760.29 | 50661.07 |  50708.59669950739
--More-- 
 2021-12-08 01:31:00 | 50692.99 | 50705.35 | 50724.35 | 50692.99 |  50708.68785087718
--More-- 
 2021-12-08 01:32:00 | 50705.11 | 50651.12 | 50707.11 | 50636.68 |  50666.96795724464
--More-- 
 2021-12-08 01:33:00 | 50651.13 | 50632.06 | 50657.89 | 50625.78 |   50636.1710666666
--More-- 
 2021-12-08 01:34:00 | 50632.14 | 50599.83 | 50646.39 | 50579.54 | 50616.416572580594
--More-- 
 2021-12-08 01:35:00 | 50601.73 | 50592.53 | 50635.09 | 50588.14 |  50614.35414847162
--More-- 
 2021-12-08 01:36:00 | 50589.78 | 50553.05 | 50591.88 | 50553.05 |   50574.9531277533
--More-- 
 2021-12-08 01:37:00 | 50553.12 | 50599.82 | 50616.18 | 50553.12 | 50583.394000000015
--More-- 
 2021-12-08 01:38:00 | 50593.04 | 50535.35 | 50600.48 | 50507.14 |  50543.44602836882
--More-- 
 2021-12-08 01:39:00 | 50535.34 | 50505.07 | 50539.87 | 50505.06 |  50516.40386541473
--More-- 
 2021-12-08 01:40:00 | 50505.11 | 50538.75 | 50538.94 | 50502.14 |  50516.01855212356
--More-- 
 2021-12-08 01:41:00 | 50538.74 | 50472.19 | 50538.74 | 50463.14 |  50501.44390624999
--More-- 
 2021-12-08 01:42:00 | 50477.07 | 50504.67 | 50512.72 | 50468.56 |  50492.66475728153
--More-- 
 2021-12-08 01:43:00 | 50504.66 | 50505.76 | 50518.11 | 50487.45 | 50501.557470588246
--More-- 
 2021-12-08 01:44:00 | 50505.77 | 50515.59 | 50522.14 | 50496.61 | 50507.173901808776
--More-- 
 2021-12-08 01:45:00 |  50515.6 | 50505.18 |  50558.5 |    50500 |  50522.47547134934
--More-- 
 2021-12-08 01:46:00 | 50505.73 | 50466.73 | 50505.89 |    50450 |  50464.49550932564
--More-- 
 2021-12-08 01:47:00 | 50470.76 | 50453.06 | 50479.39 | 50450.99 |  50460.52671140936
--More-- 
 2021-12-08 01:48:00 | 50453.07 | 50469.37 | 50478.56 | 50436.51 |  50456.02561643837
--More-- 
 2021-12-08 01:49:00 | 50469.38 | 50519.57 | 50519.57 |  50457.9 |  50476.34584245078
--More-- 
 2021-12-08 01:50:00 | 50519.56 |  50467.4 | 50519.56 | 50444.24 |  50469.33233830848
--More-- 
 2021-12-08 01:51:00 |  50468.7 |  50492.4 | 50495.46 | 50451.37 |  50472.14017361109
--More-- 
 2021-12-08 01:52:00 | 50493.11 | 50423.46 | 50494.92 | 50423.46 | 50453.327612524445
--More-- 
 2021-12-08 01:53:00 | 50423.47 | 50439.36 | 50447.59 | 50423.45 |  50437.17482939632
--More-- 
 2021-12-08 01:54:00 | 50439.35 | 50427.74 | 50455.38 | 50424.43 |   50435.2105263158
--More-- 
 2021-12-08 01:55:00 |  50428.2 | 50420.69 | 50432.87 |  50396.5 | 50416.276825095054
--More-- 
 2021-12-08 01:56:00 | 50421.96 | 50443.16 | 50467.85 | 50417.21 | 50441.330901960806
--More-- 
 2021-12-08 01:57:00 | 50443.17 | 50457.67 | 50470.04 | 50439.76 | 50458.362549019635
--More-- 




 2021-12-08 01:58:00 | 50458.24 | 50450.46 | 50482.25 | 50447.87 |  50463.27987915406
 2021-12-08 01:59:00 | 50450.49 | 50474.93 | 50478.32 | 50439.78 |     50457.62640625
 2021-12-08 02:00:00 | 50474.83 | 50490.05 |  50498.6 | 50455.91 |  50475.49134615383
 2021-12-08 02:01:00 | 50488.41 | 50491.48 | 50499.99 | 50453.35 | 50480.983885869544
 2021-12-08 02:02:00 | 50491.49 | 50509.55 | 50514.33 | 50490.77 |  50500.96647058825
--More-- 
 2021-12-08 02:03:00 | 50509.56 | 50502.63 |  50521.1 | 50492.15 | 50508.242871046226
--More-- 
 2021-12-08 02:04:00 | 50504.29 | 50547.04 | 50547.04 | 50477.87 |  50507.35812217193
--More-- 
 2021-12-08 02:05:00 | 50547.35 | 50555.89 | 50572.12 | 50539.59 |  50557.15171270721
--More-- 
 2021-12-08 02:06:00 |  50555.9 | 50512.45 |  50555.9 | 50504.05 |  50514.56914855073
--More-- 
 2021-12-08 02:07:00 | 50512.46 | 50580.93 | 50585.69 | 50512.46 |  50559.68435294116
--More-- 
 2021-12-08 02:08:00 | 50580.94 | 50558.64 | 50582.83 | 50553.18 | 50567.506615776074
--More-- 
 2021-12-08 02:09:00 | 50558.71 |  50572.9 | 50587.37 | 50557.74 |  50571.84410788382
--More-- 
 2021-12-08 02:10:00 |  50570.6 | 50548.22 |  50570.6 | 50540.68 |         50555.5525
--More-- 
 2021-12-08 02:11:00 | 50548.21 | 50558.03 | 50559.99 | 50541.96 |  50551.10255555554
--More-- 
 2021-12-08 02:12:00 |  50558.7 | 50565.23 |  50572.9 |    50555 |  50564.27121527777
--More-- 
 2021-12-08 02:13:00 |  50564.6 | 50623.21 |  50625.8 | 50555.49 |  50595.92812195124
--More-- 
 2021-12-08 02:14:00 | 50623.22 | 50633.74 | 50649.99 |    50618 |  50629.35288683602
--More-- 
 2021-12-08 02:15:00 | 50629.91 | 50555.75 | 50638.86 |  50555.7 |  50605.54908045977
--More-- 
 2021-12-08 02:16:00 |  50555.7 | 50557.37 | 50573.86 | 50514.82 |  50537.04697986578
--More-- 
 2021-12-08 02:17:00 | 50557.38 |  50605.2 | 50630.22 | 50557.38 |  50599.95702359347
--More-- 
 2021-12-08 02:18:00 | 50602.42 | 50600.49 | 50609.08 | 50564.06 |  50589.82678770951
--More-- 
 2021-12-08 02:19:00 | 50600.05 | 50537.26 | 50600.06 | 50535.56 | 50561.335057208256
--More-- 
 2021-12-08 02:20:00 | 50533.88 |    50557 | 50557.97 | 50514.77 |  50530.47050000001
--More-- 
(107 rows)
--More-- 
         
level4=# 

level4=# 




level4=# 
level4=# 
level4=# 
level4=# 

level4=# 

level4=# 

level4=# select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '60m' group by minute order by minute asc ;
select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '60m' group by minute order by minute asc ;
       minute        |   open   |  close   |   high   |   low    |        avg         
---------------------+----------+----------+----------+----------+--------------------
 2021-12-08 02:54:00 | 50500.56 | 50503.37 | 50518.22 | 50484.95 |  50505.10354243536
 2021-12-08 02:55:00 | 50501.49 | 50465.01 | 50524.23 |    50465 |  50500.22739130438
 2021-12-08 02:56:00 | 50465.02 | 50458.33 | 50484.84 | 50448.04 | 50461.675732647825
 2021-12-08 02:57:00 | 50455.03 | 50377.44 | 50456.42 | 50377.36 | 50416.130431965394
 2021-12-08 02:58:00 | 50377.36 | 50365.82 | 50391.63 | 50357.51 |  50370.21003472219
 2021-12-08 02:59:00 | 50366.87 | 50379.99 | 50387.09 | 50357.51 | 50369.597272727246
 2021-12-08 03:00:00 |  50381.1 | 50345.28 | 50396.25 | 50336.06 |   50357.6729925187
 2021-12-08 03:01:00 | 50345.27 | 50357.73 | 50384.95 | 50340.76 |  50356.77142045454
 2021-12-08 03:02:00 | 50359.99 |  50379.6 | 50399.99 | 50359.99 |  50383.78264788735
 2021-12-08 03:03:00 | 50380.21 | 50405.66 | 50405.66 | 50367.35 |  50378.00012135922
 2021-12-08 03:04:00 | 50404.84 | 50415.32 |  50451.3 | 50404.83 |  50428.55674418602
 2021-12-08 03:05:00 | 50412.94 | 50390.62 | 50420.08 | 50374.82 |  50399.48185185185
 2021-12-08 03:06:00 | 50390.63 |  50396.8 | 50403.81 | 50384.81 | 50393.992298387144
 2021-12-08 03:07:00 | 50393.37 | 50391.54 | 50416.64 | 50385.75 |  50400.90525700933
 2021-12-08 03:08:00 | 50389.18 | 50387.85 | 50428.95 |  50383.6 |  50401.57220367281
 2021-12-08 03:09:00 | 50388.75 | 50409.86 | 50415.42 | 50388.75 |  50406.60611246943
 2021-12-08 03:10:00 | 50409.85 | 50408.41 | 50428.46 | 50394.06 |  50411.90855172411
 2021-12-08 03:11:00 | 50408.77 | 50405.01 | 50415.74 | 50390.13 |  50401.90870775351
 2021-12-08 03:12:00 | 50400.14 | 50447.19 | 50447.19 | 50398.67 |  50422.05284634768
 2021-12-08 03:13:00 |  50447.2 | 50470.25 | 50500.04 | 50447.19 |  50475.81576779026
 2021-12-08 03:14:00 | 50470.24 |  50461.2 | 50489.52 | 50458.44 |  50472.54979400745
 2021-12-08 03:15:00 | 50461.17 | 50433.59 | 50482.02 | 50425.28 |  50459.60686111107
 2021-12-08 03:16:00 | 50433.69 | 50476.88 | 50476.88 | 50430.67 |  50450.81133171911
 2021-12-08 03:17:00 |    50477 | 50499.98 | 50499.99 |    50477 |  50493.12933701662
 2021-12-08 03:18:00 | 50499.97 | 50461.22 | 50515.14 | 50461.16 |  50488.16815286622
 2021-12-08 03:19:00 |  50461.3 | 50439.07 | 50465.28 | 50426.03 |  50449.36935656836
 2021-12-08 03:20:00 | 50439.06 | 50399.06 | 50446.26 | 50388.89 |  50416.82834158418
 2021-12-08 03:21:00 | 50396.51 | 50408.56 | 50408.56 | 50390.72 |  50402.05584582439
 2021-12-08 03:22:00 | 50406.27 | 50379.46 | 50431.38 | 50368.38 |   50407.5419414894
 2021-12-08 03:23:00 | 50380.95 | 50403.53 | 50403.53 | 50374.83 |  50386.00835195532
 2021-12-08 03:24:00 | 50403.52 | 50454.54 | 50454.54 | 50394.38 |  50420.60028268552
 2021-12-08 03:25:00 | 50452.13 | 50458.76 | 50468.88 | 50452.13 | 50459.403370786546
 2021-12-08 03:26:00 | 50458.75 | 50450.34 |  50473.8 | 50440.99 | 50458.766631853796
 2021-12-08 03:27:00 | 50450.35 | 50447.84 | 50498.33 | 50447.48 |  50471.75489071039
 2021-12-08 03:28:00 | 50447.85 | 50429.75 | 50452.34 |  50419.7 | 50436.080646387854
 2021-12-08 03:29:00 | 50429.13 | 50368.38 | 50429.13 | 50368.38 | 50392.604370860914
 2021-12-08 03:30:00 | 50368.39 |  50395.6 | 50403.24 | 50368.38 |  50390.41826530615
 2021-12-08 03:31:00 | 50395.61 | 50388.72 | 50397.99 | 50386.92 |  50394.13757142861
 2021-12-08 03:32:00 | 50389.48 | 50434.48 | 50434.48 | 50388.66 | 50413.612995951415
 2021-12-08 03:33:00 | 50432.77 | 50475.45 | 50482.55 | 50432.05 | 50453.147272727285
 2021-12-08 03:34:00 | 50475.44 | 50466.34 | 50475.54 | 50455.17 |  50463.40807860263
 2021-12-08 03:35:00 | 50465.48 | 50427.43 | 50483.43 | 50417.68 |  50463.05076320937
 2021-12-08 03:36:00 |  50427.5 | 50414.67 | 50436.84 |    50400 |  50420.49586762077
 2021-12-08 03:37:00 | 50414.68 | 50449.99 | 50449.99 | 50408.97 |  50426.47942528736
 2021-12-08 03:38:00 |    50450 | 50423.75 | 50457.59 | 50404.83 |  50427.93910000001
 2021-12-08 03:39:00 | 50422.09 | 50414.76 | 50428.04 | 50403.03 |  50415.99131147544
 2021-12-08 03:40:00 | 50415.34 | 50394.86 | 50458.05 | 50385.42 |  50426.31463768119
 2021-12-08 03:41:00 | 50393.15 |    50387 | 50395.34 | 50372.23 |  50388.56318101935
 2021-12-08 03:42:00 | 50387.02 | 50386.29 |  50393.3 | 50369.42 |  50383.44858800771
 2021-12-08 03:43:00 | 50384.22 | 50419.25 | 50432.05 | 50378.35 |  50397.91651063835
--More-- 
 2021-12-08 03:44:00 | 50417.87 | 50378.43 | 50417.87 | 50370.28 |  50382.08652920957
--More-- 
 2021-12-08 03:45:00 | 50379.29 | 50342.74 | 50388.04 | 50342.74 | 50368.077608069165
--More-- 
 2021-12-08 03:46:00 | 50343.79 | 50398.35 | 50398.35 |  50337.5 |  50361.85898305086
--More-- 
 2021-12-08 03:47:00 | 50398.34 | 50355.45 | 50415.36 | 50349.94 |  50399.72023752968
--More-- 
 2021-12-08 03:48:00 | 50354.36 | 50277.97 | 50355.45 | 50275.07 |  50314.14177184464
--More-- 
 2021-12-08 03:49:00 | 50277.98 | 50290.71 | 50307.57 | 50277.97 |  50292.25347394544
--More-- 
 2021-12-08 03:50:00 | 50287.45 | 50167.96 | 50296.21 | 50167.95 |  50231.87389033932
--More-- 
 2021-12-08 03:51:00 | 50169.22 | 50191.66 | 50219.98 | 50154.33 |  50194.15789625355
--More-- 
 2021-12-08 03:52:00 | 50191.65 | 50218.12 | 50235.65 | 50159.36 | 50204.113753462596
--More-- 
 2021-12-08 03:53:00 | 50218.11 |    50250 | 50260.99 |    50200 |  50233.57731313126
--More-- 
 2021-12-08 03:54:00 | 50250.01 | 50224.67 | 50255.39 | 50221.51 | 50241.175877192916
--More-- 
(61 rows)
--More-- 
         
level4=# select count(*) from best_bid_prices ;
select count(*) from best_bid_prices l
level4-# ;
;
 count  
--------
 350931
(1 row)

level4=# select count(*) from best_bid_prices ;
select count(*) from best_bid_prices ;
 count  
--------
 351092
(1 row)

level4=# select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '1h' group by minute order by minute asc ;
select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '1h' group by minute order by minute asc ;
       minute        |   open   |  close   |   high   |   low    |        avg         
---------------------+----------+----------+----------+----------+--------------------
 2021-12-08 02:55:00 | 50512.14 | 50465.01 | 50524.23 |    50465 |  50499.09376425857
 2021-12-08 02:56:00 | 50465.02 | 50458.33 | 50484.84 | 50448.04 | 50461.675732647825
 2021-12-08 02:57:00 | 50455.03 | 50377.44 | 50456.42 | 50377.36 | 50416.130431965394
 2021-12-08 02:58:00 | 50377.36 | 50365.82 | 50391.63 | 50357.51 |  50370.21003472219
 2021-12-08 02:59:00 | 50366.87 | 50379.99 | 50387.09 | 50357.51 | 50369.597272727246
 2021-12-08 03:00:00 |  50381.1 | 50345.28 | 50396.25 | 50336.06 |   50357.6729925187
 2021-12-08 03:01:00 | 50345.27 | 50357.73 | 50384.95 | 50340.76 |  50356.77142045454
 2021-12-08 03:02:00 | 50359.99 |  50379.6 | 50399.99 | 50359.99 |  50383.78264788735
 2021-12-08 03:03:00 | 50380.21 | 50405.66 | 50405.66 | 50367.35 |  50378.00012135922
 2021-12-08 03:04:00 | 50404.84 | 50415.32 |  50451.3 | 50404.83 |  50428.55674418602
 2021-12-08 03:05:00 | 50412.94 | 50390.62 | 50420.08 | 50374.82 |  50399.48185185185
 2021-12-08 03:06:00 | 50390.63 |  50396.8 | 50403.81 | 50384.81 | 50393.992298387144
 2021-12-08 03:07:00 | 50393.37 | 50391.54 | 50416.64 | 50385.75 |  50400.90525700933
 2021-12-08 03:08:00 | 50389.18 | 50387.85 | 50428.95 |  50383.6 |  50401.57220367281
 2021-12-08 03:09:00 | 50388.75 | 50409.86 | 50415.42 | 50388.75 |  50406.60611246943
 2021-12-08 03:10:00 | 50409.85 | 50408.41 | 50428.46 | 50394.06 |  50411.90855172411
 2021-12-08 03:11:00 | 50408.77 | 50405.01 | 50415.74 | 50390.13 |  50401.90870775351
 2021-12-08 03:12:00 | 50400.14 | 50447.19 | 50447.19 | 50398.67 |  50422.05284634768
 2021-12-08 03:13:00 |  50447.2 | 50470.25 | 50500.04 | 50447.19 |  50475.81576779026
 2021-12-08 03:14:00 | 50470.24 |  50461.2 | 50489.52 | 50458.44 |  50472.54979400745
 2021-12-08 03:15:00 | 50461.17 | 50433.59 | 50482.02 | 50425.28 |  50459.60686111107
 2021-12-08 03:16:00 | 50433.69 | 50476.88 | 50476.88 | 50430.67 |  50450.81133171911
 2021-12-08 03:17:00 |    50477 | 50499.98 | 50499.99 |    50477 |  50493.12933701662
 2021-12-08 03:18:00 | 50499.97 | 50461.22 | 50515.14 | 50461.16 |  50488.16815286622
 2021-12-08 03:19:00 |  50461.3 | 50439.07 | 50465.28 | 50426.03 |  50449.36935656836
 2021-12-08 03:20:00 | 50439.06 | 50399.06 | 50446.26 | 50388.89 |  50416.82834158418
 2021-12-08 03:21:00 | 50396.51 | 50408.56 | 50408.56 | 50390.72 |  50402.05584582439
 2021-12-08 03:22:00 | 50406.27 | 50379.46 | 50431.38 | 50368.38 |   50407.5419414894
 2021-12-08 03:23:00 | 50380.95 | 50403.53 | 50403.53 | 50374.83 |  50386.00835195532
 2021-12-08 03:24:00 | 50403.52 | 50454.54 | 50454.54 | 50394.38 |  50420.60028268552
 2021-12-08 03:25:00 | 50452.13 | 50458.76 | 50468.88 | 50452.13 | 50459.403370786546
 2021-12-08 03:26:00 | 50458.75 | 50450.34 |  50473.8 | 50440.99 | 50458.766631853796
 2021-12-08 03:27:00 | 50450.35 | 50447.84 | 50498.33 | 50447.48 |  50471.75489071039
 2021-12-08 03:28:00 | 50447.85 | 50429.75 | 50452.34 |  50419.7 | 50436.080646387854
 2021-12-08 03:29:00 | 50429.13 | 50368.38 | 50429.13 | 50368.38 | 50392.604370860914
 2021-12-08 03:30:00 | 50368.39 |  50395.6 | 50403.24 | 50368.38 |  50390.41826530615
 2021-12-08 03:31:00 | 50395.61 | 50388.72 | 50397.99 | 50386.92 |  50394.13757142861
 2021-12-08 03:32:00 | 50389.48 | 50434.48 | 50434.48 | 50388.66 | 50413.612995951415
 2021-12-08 03:33:00 | 50432.77 | 50475.45 | 50482.55 | 50432.05 | 50453.147272727285
 2021-12-08 03:34:00 | 50475.44 | 50466.34 | 50475.54 | 50455.17 |  50463.40807860263
 2021-12-08 03:35:00 | 50465.48 | 50427.43 | 50483.43 | 50417.68 |  50463.05076320937
 2021-12-08 03:36:00 |  50427.5 | 50414.67 | 50436.84 |    50400 |  50420.49586762077
 2021-12-08 03:37:00 | 50414.68 | 50449.99 | 50449.99 | 50408.97 |  50426.47942528736
 2021-12-08 03:38:00 |    50450 | 50423.75 | 50457.59 | 50404.83 |  50427.93910000001
 2021-12-08 03:39:00 | 50422.09 | 50414.76 | 50428.04 | 50403.03 |  50415.99131147544
 2021-12-08 03:40:00 | 50415.34 | 50394.86 | 50458.05 | 50385.42 |  50426.31463768119
 2021-12-08 03:41:00 | 50393.15 |    50387 | 50395.34 | 50372.23 |  50388.56318101935
 2021-12-08 03:42:00 | 50387.02 | 50386.29 |  50393.3 | 50369.42 |  50383.44858800771
 2021-12-08 03:43:00 | 50384.22 | 50419.25 | 50432.05 | 50378.35 |  50397.91651063835
 2021-12-08 03:44:00 | 50417.87 | 50378.43 | 50417.87 | 50370.28 |  50382.08652920957
--More-- 
 2021-12-08 03:45:00 | 50379.29 | 50342.74 | 50388.04 | 50342.74 | 50368.077608069165
--More-- 
 2021-12-08 03:46:00 | 50343.79 | 50398.35 | 50398.35 |  50337.5 |  50361.85898305086
--More-- 
 2021-12-08 03:47:00 | 50398.34 | 50355.45 | 50415.36 | 50349.94 |  50399.72023752968
--More-- 
 2021-12-08 03:48:00 | 50354.36 | 50277.97 | 50355.45 | 50275.07 |  50314.14177184464
--More-- 
 2021-12-08 03:49:00 | 50277.98 | 50290.71 | 50307.57 | 50277.97 |  50292.25347394544
--More-- 
 2021-12-08 03:50:00 | 50287.45 | 50167.96 | 50296.21 | 50167.95 |  50231.87389033932
--More-- 
 2021-12-08 03:51:00 | 50169.22 | 50191.66 | 50219.98 | 50154.33 |  50194.15789625355
--More-- 
 2021-12-08 03:52:00 | 50191.65 | 50218.12 | 50235.65 | 50159.36 | 50204.113753462596
--More-- 
 2021-12-08 03:53:00 | 50218.11 |    50250 | 50260.99 |    50200 |  50233.57731313126
--More-- 
 2021-12-08 03:54:00 | 50250.01 | 50209.13 | 50255.39 | 50195.18 |  50215.47559837736
--More-- 
 2021-12-08 03:55:00 | 50209.12 | 50195.21 | 50209.12 | 50195.21 |  50200.38916666666
--More-- 
(61 rows)
--More-- 
         
level4=# select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '4h' group by minute order by minute asc ;
select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '4h' group by minute order by minute asc ;
       minute        |   open   |  close   |   high   |   low    |        avg         
---------------------+----------+----------+----------+----------+--------------------
 2021-12-08 00:34:00 | 50579.59 | 50641.35 | 50647.87 | 50579.59 | 50627.996045751715
 2021-12-08 00:35:00 | 50641.36 | 50720.47 | 50720.47 | 50638.24 |  50687.19361990959
 2021-12-08 00:36:00 | 50721.26 | 50738.11 | 50742.35 | 50671.88 | 50716.351904761876
 2021-12-08 00:37:00 | 50740.87 | 50726.38 | 50745.02 | 50697.67 |  50726.78179894185
 2021-12-08 00:38:00 | 50726.37 | 50758.22 | 50787.68 | 50711.68 |  50758.53186615192
 2021-12-08 00:39:00 | 50757.64 | 50729.15 | 50786.43 | 50718.17 | 50753.136486988784
 2021-12-08 00:40:00 | 50729.74 | 50670.63 |  50749.5 | 50665.56 |  50705.66861538462
 2021-12-08 00:41:00 | 50671.65 | 50684.98 | 50688.03 | 50632.33 |  50651.57514431232
 2021-12-08 00:42:00 | 50684.97 | 50688.42 | 50688.42 | 50647.16 |  50668.81890510948
 2021-12-08 00:43:00 | 50688.43 | 50699.89 | 50743.14 | 50688.43 |  50719.48397459161
 2021-12-08 00:44:00 | 50699.93 | 50729.17 | 50741.64 | 50680.62 |  50717.08622905024
 2021-12-08 00:45:00 | 50728.39 | 50715.54 | 50732.81 | 50680.62 |  50698.39767676764
 2021-12-08 00:46:00 | 50715.56 |  50655.3 | 50716.14 | 50654.68 |  50680.57939172749
 2021-12-08 00:47:00 | 50660.85 | 50704.82 | 50728.49 | 50651.33 |  50679.67647840531
 2021-12-08 00:48:00 | 50703.76 | 50682.18 | 50707.36 | 50654.14 | 50687.367020547885
 2021-12-08 00:49:00 | 50675.33 | 50697.81 | 50699.24 | 50654.02 | 50675.441706422025
 2021-12-08 00:50:00 | 50695.72 | 50672.68 | 50702.48 | 50659.73 |  50684.22043010758
 2021-12-08 00:51:00 | 50679.35 | 50666.36 | 50679.35 | 50651.33 |   50659.2832249322
 2021-12-08 00:52:00 | 50659.57 | 50646.58 | 50670.06 | 50633.06 |  50646.74953987735
 2021-12-08 00:53:00 | 50646.59 | 50620.45 | 50649.99 | 50613.55 |  50632.55930434785
 2021-12-08 00:54:00 |    50620 | 50644.38 | 50644.38 | 50608.46 |  50628.86902597405
 2021-12-08 00:55:00 | 50645.22 | 50708.22 | 50722.68 | 50645.22 |  50689.59070224721
 2021-12-08 00:56:00 | 50708.27 | 50694.15 | 50712.13 | 50659.36 | 50685.059320557535
 2021-12-08 00:57:00 | 50690.45 |  50685.3 | 50724.49 | 50681.57 | 50703.773670329654
 2021-12-08 00:58:00 | 50685.28 | 50706.17 | 50735.02 | 50681.57 |  50710.17678284192
 2021-12-08 00:59:00 | 50706.38 | 50772.75 | 50772.75 | 50706.38 |  50733.89588957064
 2021-12-08 01:00:00 | 50767.23 | 50726.12 | 50770.39 | 50707.01 |   50730.2842093023
 2021-12-08 01:01:00 | 50727.39 | 50722.39 | 50765.46 |  50712.5 |  50730.53717741938
 2021-12-08 01:02:00 | 50722.79 | 50731.77 | 50731.77 | 50694.32 |   50708.1488478261
 2021-12-08 01:03:00 | 50731.79 |  50730.6 | 50734.42 | 50714.27 |  50725.70573333335
 2021-12-08 01:04:00 | 50726.12 | 50770.85 | 50784.11 | 50725.63 |  50746.90228744938
 2021-12-08 01:05:00 | 50771.07 | 50811.02 | 50827.18 | 50771.07 |  50803.23383977902
 2021-12-08 01:06:00 | 50809.92 | 50814.51 | 50827.33 | 50777.53 | 50810.073630705345
 2021-12-08 01:07:00 | 50812.28 | 50770.95 | 50817.18 | 50764.08 | 50787.244278283484
 2021-12-08 01:08:00 | 50767.22 | 50823.02 | 50837.88 | 50767.22 |  50808.42053949901
 2021-12-08 01:09:00 | 50820.29 | 50846.18 | 50848.99 |  50791.6 | 50818.657783783776
 2021-12-08 01:10:00 | 50842.23 | 50813.39 | 50846.77 | 50789.77 |  50812.18486348126
 2021-12-08 01:11:00 | 50813.42 | 50813.44 | 50838.87 | 50811.69 |  50822.52797583083
 2021-12-08 01:12:00 | 50812.74 | 50817.07 | 50822.19 | 50797.01 |  50814.86889221559
 2021-12-08 01:13:00 | 50817.66 | 50769.67 | 50829.64 | 50761.18 |  50792.66091743121
 2021-12-08 01:14:00 | 50769.64 | 50764.64 | 50770.45 | 50750.34 |  50760.28955555561
 2021-12-08 01:15:00 | 50764.63 | 50748.63 | 50764.96 | 50743.12 |  50753.96188679245
 2021-12-08 01:16:00 | 50748.64 | 50755.52 | 50760.49 | 50733.38 |  50743.29377777775
 2021-12-08 01:17:00 | 50755.51 | 50731.75 | 50761.76 | 50731.65 | 50747.574110169495
 2021-12-08 01:18:00 | 50732.55 | 50746.67 | 50756.38 | 50708.76 |  50738.60287634405
 2021-12-08 01:19:00 | 50746.95 | 50783.65 | 50798.13 | 50744.68 |  50771.71397637798
 2021-12-08 01:20:00 | 50783.63 | 50795.55 | 50795.55 | 50744.68 |  50766.30832031252
 2021-12-08 01:21:00 | 50786.25 | 50773.29 |  50804.2 | 50766.26 |  50783.09258426965
 2021-12-08 01:22:00 | 50772.37 | 50816.95 | 50835.18 |  50771.9 |  50805.10581333332
 2021-12-08 01:23:00 | 50812.77 | 50810.59 | 50825.11 | 50806.12 | 50813.049807228956
--More-- 
 2021-12-08 01:24:00 | 50810.92 | 50765.34 | 50810.92 | 50755.81 |  50778.69688235297
--More-- 
 2021-12-08 01:25:00 | 50765.35 | 50770.03 | 50775.99 | 50765.23 | 50770.725591397866
--More-- 
 2021-12-08 01:26:00 | 50769.28 | 50750.26 | 50769.28 | 50730.41 |  50744.04091428568
--More-- 
 2021-12-08 01:27:00 | 50750.27 | 50746.98 | 50772.61 | 50744.66 |  50750.69905759173
--More-- 
 2021-12-08 01:28:00 | 50748.48 | 50740.59 | 50748.81 | 50712.04 |  50728.54392271663
--More-- 
 2021-12-08 01:29:00 | 50740.57 | 50716.85 | 50743.43 | 50711.42 | 50721.683931357315
--More-- 
 2021-12-08 01:30:00 | 50718.12 | 50692.61 | 50760.29 | 50661.07 |  50708.59669950739
--More-- 
 2021-12-08 01:31:00 | 50692.99 | 50705.35 | 50724.35 | 50692.99 |  50708.68785087718
--More-- 

 2021-12-08 01:32:00 | 50705.11 | 50651.12 | 50707.11 | 50636.68 |  50666.96795724464
 2021-12-08 01:33:00 | 50651.13 | 50632.06 | 50657.89 | 50625.78 |   50636.1710666666
--More-- 
 2021-12-08 01:34:00 | 50632.14 | 50599.83 | 50646.39 | 50579.54 | 50616.416572580594
--More-- 


 2021-12-08 01:35:00 | 50601.73 | 50592.53 | 50635.09 | 50588.14 |  50614.35414847164
 2021-12-08 01:36:00 | 50589.78 | 50553.05 | 50591.88 | 50553.05 | 50574.953127753324
 2021-12-08 01:37:00 | 50553.12 | 50599.82 | 50616.18 | 50553.12 |  50583.39400000011
--More-- 
 2021-12-08 01:38:00 | 50593.04 | 50535.35 | 50600.48 | 50507.14 |  50543.44602836878
--More-- 
 2021-12-08 01:39:00 | 50535.34 | 50505.07 | 50539.87 | 50505.06 |  50516.40386541476
--More-- 
 2021-12-08 01:40:00 | 50505.11 | 50538.75 | 50538.94 | 50502.14 | 50516.018552123554
--More-- 
 2021-12-08 01:41:00 | 50538.74 | 50472.19 | 50538.74 | 50463.14 | 50501.443906249995
--More-- 
 2021-12-08 01:42:00 | 50477.07 | 50504.67 | 50512.72 | 50468.56 |  50492.66475728158
--More-- 
 2021-12-08 01:43:00 | 50504.66 | 50505.76 | 50518.11 | 50487.45 | 50501.557470588225
--More-- 
 2021-12-08 01:44:00 | 50505.77 | 50515.59 | 50522.14 | 50496.61 | 50507.173901808776
--More-- 
 2021-12-08 01:45:00 |  50515.6 | 50505.18 |  50558.5 |    50500 |   50522.4754713493
--More-- 
 2021-12-08 01:46:00 | 50505.73 | 50466.73 | 50505.89 |    50450 | 50464.495509325665
--More-- 
 2021-12-08 01:47:00 | 50470.76 | 50453.06 | 50479.39 | 50450.99 |  50460.52671140937
--More-- 

 2021-12-08 01:48:00 | 50453.07 | 50469.37 | 50478.56 | 50436.51 |  50456.02561643836
 2021-12-08 01:49:00 | 50469.38 | 50519.57 | 50519.57 |  50457.9 |  50476.34584245076
--More-- 
 2021-12-08 01:50:00 | 50519.56 |  50467.4 | 50519.56 | 50444.24 | 50469.332338308464
--More-- 
 2021-12-08 01:51:00 |  50468.7 |  50492.4 | 50495.46 | 50451.37 |  50472.14017361114
--More-- 
 2021-12-08 01:52:00 | 50493.11 | 50423.46 | 50494.92 | 50423.46 |  50453.32761252445
--More-- 
 2021-12-08 01:53:00 | 50423.47 | 50439.36 | 50447.59 | 50423.45 | 50437.174829396325
--More-- 
 2021-12-08 01:54:00 | 50439.35 | 50427.74 | 50455.38 | 50424.43 |  50435.21052631578
--More-- 
 2021-12-08 01:55:00 |  50428.2 | 50420.69 | 50432.87 |  50396.5 |  50416.27682509504
--More-- 
 2021-12-08 01:56:00 | 50421.96 | 50443.16 | 50467.85 | 50417.21 |  50441.33090196078
--More-- 
 2021-12-08 01:57:00 | 50443.17 | 50457.67 | 50470.04 | 50439.76 |  50458.36254901957
--More-- 

 2021-12-08 01:58:00 | 50458.24 | 50450.46 | 50482.25 | 50447.87 |  50463.27987915408
 2021-12-08 01:59:00 | 50450.49 | 50474.93 | 50478.32 | 50439.78 |     50457.62640625
--More-- 
 2021-12-08 02:00:00 | 50474.83 | 50490.05 |  50498.6 | 50455.91 |  50475.49134615384
--More-- 



 2021-12-08 02:01:00 | 50488.41 | 50491.48 | 50499.99 | 50453.35 | 50480.983885869566
 2021-12-08 02:02:00 | 50491.49 | 50509.55 | 50514.33 | 50490.77 |  50500.96647058822
 2021-12-08 02:03:00 | 50509.56 | 50502.63 |  50521.1 | 50492.15 |  50508.24287104621
 2021-12-08 02:04:00 | 50504.29 | 50547.04 | 50547.04 | 50477.87 |  50507.35812217196
--More-- 
 2021-12-08 02:05:00 | 50547.35 | 50555.89 | 50572.12 | 50539.59 | 50557.151712707186
--More-- 
 2021-12-08 02:06:00 |  50555.9 | 50512.45 |  50555.9 | 50504.05 |  50514.56914855073
--More-- 
 2021-12-08 02:07:00 | 50512.46 | 50580.93 | 50585.69 | 50512.46 |  50559.68435294118
--More-- 
 2021-12-08 02:08:00 | 50580.94 | 50558.64 | 50582.83 | 50553.18 |  50567.50661577609
--More-- 
 2021-12-08 02:09:00 | 50558.71 |  50572.9 | 50587.37 | 50557.74 | 50571.844107883815
--More-- 
 2021-12-08 02:10:00 |  50570.6 | 50548.22 |  50570.6 | 50540.68 |  50555.55250000002
--More-- 
 2021-12-08 02:11:00 | 50548.21 | 50558.03 | 50559.99 | 50541.96 |  50551.10255555556
--More-- 
 2021-12-08 02:12:00 |  50558.7 | 50565.23 |  50572.9 |    50555 |  50564.27121527777
--More-- 
 2021-12-08 02:13:00 |  50564.6 | 50623.21 |  50625.8 | 50555.49 | 50595.928121951234
--More-- 
 2021-12-08 02:14:00 | 50623.22 | 50633.74 | 50649.99 |    50618 |  50629.35288683602
--More-- 
 2021-12-08 02:15:00 | 50629.91 | 50555.75 | 50638.86 |  50555.7 |  50605.54908045978
--More-- 
 2021-12-08 02:16:00 |  50555.7 | 50557.37 | 50573.86 | 50514.82 |  50537.04697986578
--More-- 
 2021-12-08 02:17:00 | 50557.38 |  50605.2 | 50630.22 | 50557.38 |  50599.95702359351
--More-- 
 2021-12-08 02:18:00 | 50602.42 | 50600.49 | 50609.08 | 50564.06 |  50589.82678770952
--More-- 
 2021-12-08 02:19:00 | 50600.05 | 50537.26 | 50600.06 | 50535.56 | 50561.335057208256
--More-- 
 2021-12-08 02:20:00 | 50533.88 | 50550.86 | 50558.71 | 50514.77 |  50532.74099437148
--More-- 
 2021-12-08 02:21:00 | 50550.96 |  50530.5 | 50578.83 | 50528.42 |  50545.02877403846
--More-- 
 2021-12-08 02:22:00 | 50529.11 | 50546.54 | 50575.13 | 50515.98 |  50539.49395833334
--More-- 
 2021-12-08 02:23:00 | 50547.56 | 50549.11 | 50561.62 | 50540.46 |  50551.23941747573
--More-- 
 2021-12-08 02:24:00 | 50547.65 | 50578.83 | 50578.83 | 50547.65 |  50554.90388059701
--More-- 
 2021-12-08 02:25:00 | 50582.11 |  50578.2 | 50607.47 |  50578.2 | 50594.159411764704
--More-- 
 2021-12-08 02:26:00 | 50569.96 |  50630.2 |  50630.2 | 50569.95 |  50598.04475460123
--More-- 




 2021-12-08 02:27:00 | 50630.21 | 50633.74 | 50643.54 | 50610.76 |  50634.47681102363
 2021-12-08 02:28:00 | 50633.75 | 50674.93 | 50678.79 | 50633.74 |  50662.82492537315
 2021-12-08 02:29:00 | 50670.83 | 50711.53 | 50711.53 | 50663.53 | 50677.312711864404
 2021-12-08 02:30:00 | 50706.74 | 50692.04 | 50711.53 | 50654.76 |  50675.96935613683
 2021-12-08 02:31:00 | 50692.05 | 50675.33 | 50700.42 | 50670.98 |  50685.57936986301
--More-- 
 2021-12-08 02:32:00 | 50674.28 | 50722.54 | 50722.54 | 50673.72 |  50696.28633333334
--More-- 
 2021-12-08 02:33:00 | 50722.17 | 50700.69 | 50748.32 |    50690 |  50723.63888211382
--More-- 
 2021-12-08 02:34:00 | 50701.36 | 50722.64 | 50742.13 | 50695.75 |  50712.37633093527
--More-- 
 2021-12-08 02:35:00 | 50721.69 | 50692.52 | 50721.69 | 50680.59 |  50698.15845637584
--More-- 
 2021-12-08 02:36:00 | 50693.16 |  50694.3 | 50702.33 |  50689.4 | 50693.422333333314
--More-- 
 2021-12-08 02:37:00 | 50692.81 | 50689.01 | 50696.36 | 50664.29 | 50683.913561946916
--More-- 
 2021-12-08 02:38:00 | 50689.57 | 50627.88 |  50699.8 | 50627.88 |  50674.03610644259
--More-- 
 2021-12-08 02:39:00 | 50628.53 | 50616.87 | 50644.66 | 50616.87 |  50626.66025510205
--More-- 
 2021-12-08 02:40:00 | 50616.91 | 50598.22 | 50639.55 | 50598.22 | 50624.821340782124
--More-- 

 2021-12-08 02:41:00 | 50598.05 |  50578.7 | 50598.05 | 50578.02 |         50588.2525
 2021-12-08 02:42:00 | 50578.02 | 50600.72 | 50614.95 | 50578.02 |  50601.83005494506
--More-- 
 2021-12-08 02:43:00 |  50600.6 | 50595.96 | 50600.67 |  50579.4 |  50592.17842639595
--More-- 
 2021-12-08 02:44:00 | 50595.95 | 50606.41 | 50614.95 | 50581.21 |  50597.77732558141
--More-- 
 2021-12-08 02:45:00 | 50606.42 | 50635.73 |  50639.3 | 50605.14 |  50622.77443609021
--More-- 
 2021-12-08 02:46:00 | 50635.39 | 50616.59 | 50635.42 | 50611.42 | 50617.172514285725
--More-- 
 2021-12-08 02:47:00 | 50616.71 | 50635.73 | 50635.73 | 50611.42 | 50619.814476534295
--More-- 
 2021-12-08 02:48:00 | 50633.11 | 50640.06 | 50662.08 | 50621.12 | 50638.837125984246
--More-- 
 2021-12-08 02:49:00 | 50642.07 |  50634.2 | 50664.24 | 50626.56 |  50647.97206611571
--More-- 
 2021-12-08 02:50:00 | 50633.36 | 50558.84 | 50635.36 | 50558.06 |  50574.71253218884
--More-- 
 2021-12-08 02:51:00 | 50558.92 | 50478.51 |  50567.6 | 50458.45 |  50518.42091314029
--More-- 
 2021-12-08 02:52:00 | 50470.75 | 50483.68 | 50489.56 | 50462.06 | 50475.890842490844
--More-- 
 2021-12-08 02:53:00 |  50484.3 | 50510.72 | 50520.84 | 50466.65 |  50490.27476666667
--More-- 
 2021-12-08 02:54:00 | 50509.18 | 50503.37 | 50518.22 | 50484.95 |   50503.5868955224
--More-- 
 2021-12-08 02:55:00 | 50501.49 | 50465.01 | 50524.23 |    50465 | 50500.227391304354
--More-- 

 2021-12-08 02:56:00 | 50465.02 | 50458.33 | 50484.84 | 50448.04 |  50461.67573264781
 2021-12-08 02:57:00 | 50455.03 | 50377.44 | 50456.42 | 50377.36 |  50416.13043196543
--More-- 
 2021-12-08 02:58:00 | 50377.36 | 50365.82 | 50391.63 | 50357.51 |  50370.21003472223
--More-- 
 2021-12-08 02:59:00 | 50366.87 | 50379.99 | 50387.09 | 50357.51 | 50369.597272727246
--More-- 
 2021-12-08 03:00:00 |  50381.1 | 50345.28 | 50396.25 | 50336.06 | 50357.672992518696
--More-- 
 2021-12-08 03:01:00 | 50345.27 | 50357.73 | 50384.95 | 50340.76 | 50356.771420454534
--More-- 
 2021-12-08 03:02:00 | 50359.99 |  50379.6 | 50399.99 | 50359.99 | 50383.782647887325
--More-- 
 2021-12-08 03:03:00 | 50380.21 | 50405.66 | 50405.66 | 50367.35 |  50378.00012135923
--More-- 
 2021-12-08 03:04:00 | 50404.84 | 50415.32 |  50451.3 | 50404.83 |  50428.55674418605
--More-- 
 2021-12-08 03:05:00 | 50412.94 | 50390.62 | 50420.08 | 50374.82 |  50399.48185185185
--More-- 
 2021-12-08 03:06:00 | 50390.63 |  50396.8 | 50403.81 | 50384.81 |  50393.99229838709
--More-- 
 2021-12-08 03:07:00 | 50393.37 | 50391.54 | 50416.64 | 50385.75 |  50400.90525700933
--More-- 
 2021-12-08 03:08:00 | 50389.18 | 50387.85 | 50428.95 |  50383.6 |  50401.57220367279
--More-- 
 2021-12-08 03:09:00 | 50388.75 | 50409.86 | 50415.42 | 50388.75 |  50406.60611246943
--More-- 
 2021-12-08 03:10:00 | 50409.85 | 50408.41 | 50428.46 | 50394.06 |  50411.90855172415
--More-- 
 2021-12-08 03:11:00 | 50408.77 | 50405.01 | 50415.74 | 50390.13 | 50401.908707753486
--More-- 
 2021-12-08 03:12:00 | 50400.14 | 50447.19 | 50447.19 | 50398.67 | 50422.052846347615
--More-- 
 2021-12-08 03:13:00 |  50447.2 | 50470.25 | 50500.04 | 50447.19 |  50475.81576779026
--More-- 
 2021-12-08 03:14:00 | 50470.24 |  50461.2 | 50489.52 | 50458.44 |  50472.54979400749
--More-- 
 2021-12-08 03:15:00 | 50461.17 | 50433.59 | 50482.02 | 50425.28 |  50459.60686111111
--More-- 
 2021-12-08 03:16:00 | 50433.69 | 50476.88 | 50476.88 | 50430.67 |  50450.81133171913
--More-- 



 2021-12-08 03:17:00 |    50477 | 50499.98 | 50499.99 |    50477 | 50493.129337016566
 2021-12-08 03:18:00 | 50499.97 | 50461.22 | 50515.14 | 50461.16 |  50488.16815286627
 2021-12-08 03:19:00 |  50461.3 | 50439.07 | 50465.28 | 50426.03 |  50449.36935656836
 2021-12-08 03:20:00 | 50439.06 | 50399.06 | 50446.26 | 50388.89 | 50416.828341584136
--More-- 
 2021-12-08 03:21:00 | 50396.51 | 50408.56 | 50408.56 | 50390.72 | 50402.055845824405
--More-- 
 2021-12-08 03:22:00 | 50406.27 | 50379.46 | 50431.38 | 50368.38 |  50407.54194148935
--More-- 
 2021-12-08 03:23:00 | 50380.95 | 50403.53 | 50403.53 | 50374.83 | 50386.008351955315
--More-- 
 2021-12-08 03:24:00 | 50403.52 | 50454.54 | 50454.54 | 50394.38 |   50420.6002826855
--More-- 
 2021-12-08 03:25:00 | 50452.13 | 50458.76 | 50468.88 | 50452.13 |  50459.40337078651
--More-- 
 2021-12-08 03:26:00 | 50458.75 | 50450.34 |  50473.8 | 50440.99 |  50458.76663185378
--More-- 
 2021-12-08 03:27:00 | 50450.35 | 50447.84 | 50498.33 | 50447.48 |  50471.75489071039
--More-- 
 2021-12-08 03:28:00 | 50447.85 | 50429.75 | 50452.34 |  50419.7 |  50436.08064638783
--More-- 
 2021-12-08 03:29:00 | 50429.13 | 50368.38 | 50429.13 | 50368.38 |  50392.60437086094
--More-- 
 2021-12-08 03:30:00 | 50368.39 |  50395.6 | 50403.24 | 50368.38 | 50390.418265306114
--More-- 
 2021-12-08 03:31:00 | 50395.61 | 50388.72 | 50397.99 | 50386.92 |  50394.13757142857
--More-- 
 2021-12-08 03:32:00 | 50389.48 | 50434.48 | 50434.48 | 50388.66 | 50413.612995951415
--More-- 
 2021-12-08 03:33:00 | 50432.77 | 50475.45 | 50482.55 | 50432.05 | 50453.147272727285
--More-- 
 2021-12-08 03:34:00 | 50475.44 | 50466.34 | 50475.54 | 50455.17 | 50463.408078602624
--More-- 
 2021-12-08 03:35:00 | 50465.48 | 50427.43 | 50483.43 | 50417.68 |  50463.05076320937
--More-- 
 2021-12-08 03:36:00 |  50427.5 | 50414.67 | 50436.84 |    50400 | 50420.495867620746
--More-- 
 2021-12-08 03:37:00 | 50414.68 | 50449.99 | 50449.99 | 50408.97 | 50426.479425287354
--More-- 
 2021-12-08 03:38:00 |    50450 | 50423.75 | 50457.59 | 50404.83 | 50427.939099999996
--More-- 
 2021-12-08 03:39:00 | 50422.09 | 50414.76 | 50428.04 | 50403.03 |  50415.99131147541
--More-- 
 2021-12-08 03:40:00 | 50415.34 | 50394.86 | 50458.05 | 50385.42 |  50426.31463768115
--More-- 
 2021-12-08 03:41:00 | 50393.15 |    50387 | 50395.34 | 50372.23 |  50388.56318101932
--More-- 
 2021-12-08 03:42:00 | 50387.02 | 50386.29 |  50393.3 | 50369.42 |  50383.44858800774
--More-- 



 2021-12-08 03:43:00 | 50384.22 | 50419.25 | 50432.05 | 50378.35 |  50397.91651063829
 2021-12-08 03:44:00 | 50417.87 | 50378.43 | 50417.87 | 50370.28 |  50382.08652920962
 2021-12-08 03:45:00 | 50379.29 | 50342.74 | 50388.04 | 50342.74 | 50368.077608069165
 2021-12-08 03:46:00 | 50343.79 | 50398.35 | 50398.35 |  50337.5 |  50361.85898305085
--More-- 
 2021-12-08 03:47:00 | 50398.34 | 50355.45 | 50415.36 | 50349.94 |  50399.72023752969
--More-- 
 2021-12-08 03:48:00 | 50354.36 | 50277.97 | 50355.45 | 50275.07 |  50314.14177184466
--More-- 
 2021-12-08 03:49:00 | 50277.98 | 50290.71 | 50307.57 | 50277.97 | 50292.253473945406
--More-- 
 2021-12-08 03:50:00 | 50287.45 | 50167.96 | 50296.21 | 50167.95 | 50231.873890339455
--More-- 
 2021-12-08 03:51:00 | 50169.22 | 50191.66 | 50219.98 | 50154.33 | 50194.157896253586
--More-- 
 2021-12-08 03:52:00 | 50191.65 | 50218.12 | 50235.65 | 50159.36 | 50204.113753462596
--More-- 
 2021-12-08 03:53:00 | 50218.11 |    50250 | 50260.99 |    50200 |  50233.57731313132
--More-- 
 2021-12-08 03:54:00 | 50250.01 | 50209.13 | 50255.39 | 50195.18 |  50215.47559837727
--More-- 
 2021-12-08 03:55:00 | 50209.12 | 50212.73 | 50216.22 |  50195.2 |  50206.12858585857
--More-- 
(202 rows)
--More-- 
         
level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 




level4=# 
level4=# 
level4=# 
level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# 

level4=# select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '120m' group by minute order by minute asc ;
select time_bucket('1 minute', timestamp) as minute, first(price, timestamp) as open, last(price, timestamp) as close, max(price) as high, min(price) as low, avg(price) as avg from best_bid_prices where market_id = 3 and timestamp > now() - interval '120m' group by minute order by minute asc ;
       minute        |   open   |  close   |   high   |   low    |        avg         
---------------------+----------+----------+----------+----------+--------------------
 2021-12-08 01:56:00 | 50437.84 | 50443.16 | 50467.85 | 50436.29 |  50448.54112179489
 2021-12-08 01:57:00 | 50443.17 | 50457.67 | 50470.04 | 50439.76 | 50458.362549019635
 2021-12-08 01:58:00 | 50458.24 | 50450.46 | 50482.25 | 50447.87 |  50463.27987915408
 2021-12-08 01:59:00 | 50450.49 | 50474.93 | 50478.32 | 50439.78 |  50457.62640625003
 2021-12-08 02:00:00 | 50474.83 | 50490.05 |  50498.6 | 50455.91 |  50475.49134615383
 2021-12-08 02:01:00 | 50488.41 | 50491.48 | 50499.99 | 50453.35 |  50480.98388586956
 2021-12-08 02:02:00 | 50491.49 | 50509.55 | 50514.33 | 50490.77 |  50500.96647058823
 2021-12-08 02:03:00 | 50509.56 | 50502.63 |  50521.1 | 50492.15 |  50508.24287104625
 2021-12-08 02:04:00 | 50504.29 | 50547.04 | 50547.04 | 50477.87 |  50507.35812217192
 2021-12-08 02:05:00 | 50547.35 | 50555.89 | 50572.12 | 50539.59 |  50557.15171270711
 2021-12-08 02:06:00 |  50555.9 | 50512.45 |  50555.9 | 50504.05 |  50514.56914855075
 2021-12-08 02:07:00 | 50512.46 | 50580.93 | 50585.69 | 50512.46 | 50559.684352941214
 2021-12-08 02:08:00 | 50580.94 | 50558.64 | 50582.83 | 50553.18 |   50567.5066157761
 2021-12-08 02:09:00 | 50558.71 |  50572.9 | 50587.37 | 50557.74 |  50571.84410788381
 2021-12-08 02:10:00 |  50570.6 | 50548.22 |  50570.6 | 50540.68 |  50555.55250000005
 2021-12-08 02:11:00 | 50548.21 | 50558.03 | 50559.99 | 50541.96 |  50551.10255555553
 2021-12-08 02:12:00 |  50558.7 | 50565.23 |  50572.9 |    50555 |  50564.27121527773
 2021-12-08 02:13:00 |  50564.6 | 50623.21 |  50625.8 | 50555.49 | 50595.928121951234
 2021-12-08 02:14:00 | 50623.22 | 50633.74 | 50649.99 |    50618 |  50629.35288683599
 2021-12-08 02:15:00 | 50629.91 | 50555.75 | 50638.86 |  50555.7 |  50605.54908045974
 2021-12-08 02:16:00 |  50555.7 | 50557.37 | 50573.86 | 50514.82 |  50537.04697986579
 2021-12-08 02:17:00 | 50557.38 |  50605.2 | 50630.22 | 50557.38 |  50599.95702359339
 2021-12-08 02:18:00 | 50602.42 | 50600.49 | 50609.08 | 50564.06 |  50589.82678770952
 2021-12-08 02:19:00 | 50600.05 | 50537.26 | 50600.06 | 50535.56 |  50561.33505720823
 2021-12-08 02:20:00 | 50533.88 | 50550.86 | 50558.71 | 50514.77 |  50532.74099437149
 2021-12-08 02:21:00 | 50550.96 |  50530.5 | 50578.83 | 50528.42 |  50545.02877403846
 2021-12-08 02:22:00 | 50529.11 | 50546.54 | 50575.13 | 50515.98 |  50539.49395833334
 2021-12-08 02:23:00 | 50547.56 | 50549.11 | 50561.62 | 50540.46 |  50551.23941747573
 2021-12-08 02:24:00 | 50547.65 | 50578.83 | 50578.83 | 50547.65 |  50554.90388059702
 2021-12-08 02:25:00 | 50582.11 |  50578.2 | 50607.47 |  50578.2 | 50594.159411764704
 2021-12-08 02:26:00 | 50569.96 |  50630.2 |  50630.2 | 50569.95 |  50598.04475460123
 2021-12-08 02:27:00 | 50630.21 | 50633.74 | 50643.54 | 50610.76 |  50634.47681102366
 2021-12-08 02:28:00 | 50633.75 | 50674.93 | 50678.79 | 50633.74 |  50662.82492537311
 2021-12-08 02:29:00 | 50670.83 | 50711.53 | 50711.53 | 50663.53 | 50677.312711864404
 2021-12-08 02:30:00 | 50706.74 | 50692.04 | 50711.53 | 50654.76 | 50675.969356136826
 2021-12-08 02:31:00 | 50692.05 | 50675.33 | 50700.42 | 50670.98 |  50685.57936986301
 2021-12-08 02:32:00 | 50674.28 | 50722.54 | 50722.54 | 50673.72 | 50696.286333333315
 2021-12-08 02:33:00 | 50722.17 | 50700.69 | 50748.32 |    50690 |  50723.63888211384
 2021-12-08 02:34:00 | 50701.36 | 50722.64 | 50742.13 | 50695.75 |  50712.37633093528
 2021-12-08 02:35:00 | 50721.69 | 50692.52 | 50721.69 | 50680.59 | 50698.158456375844
 2021-12-08 02:36:00 | 50693.16 |  50694.3 | 50702.33 |  50689.4 |  50693.42233333333
 2021-12-08 02:37:00 | 50692.81 | 50689.01 | 50696.36 | 50664.29 |   50683.9135619469
 2021-12-08 02:38:00 | 50689.57 | 50627.88 |  50699.8 | 50627.88 |  50674.03610644258
 2021-12-08 02:39:00 | 50628.53 | 50616.87 | 50644.66 | 50616.87 |  50626.66025510204
 2021-12-08 02:40:00 | 50616.91 | 50598.22 | 50639.55 | 50598.22 | 50624.821340782124
 2021-12-08 02:41:00 | 50598.05 |  50578.7 | 50598.05 | 50578.02 |         50588.2525
 2021-12-08 02:42:00 | 50578.02 | 50600.72 | 50614.95 | 50578.02 |  50601.83005494506
 2021-12-08 02:43:00 |  50600.6 | 50595.96 | 50600.67 |  50579.4 |  50592.17842639595
 2021-12-08 02:44:00 | 50595.95 | 50606.41 | 50614.95 | 50581.21 |   50597.7773255814
 2021-12-08 02:45:00 | 50606.42 | 50635.73 |  50639.3 | 50605.14 |  50622.77443609023
--More-- 
 2021-12-08 02:46:00 | 50635.39 | 50616.59 | 50635.42 | 50611.42 | 50617.172514285725
--More-- 
 2021-12-08 02:47:00 | 50616.71 | 50635.73 | 50635.73 | 50611.42 |   50619.8144765343
--More-- 
 2021-12-08 02:48:00 | 50633.11 | 50640.06 | 50662.08 | 50621.12 |  50638.83712598424
--More-- 
 2021-12-08 02:49:00 | 50642.07 |  50634.2 | 50664.24 | 50626.56 | 50647.972066115704
--More-- 
 2021-12-08 02:50:00 | 50633.36 | 50558.84 | 50635.36 | 50558.06 |   50574.7125321888
--More-- 
 2021-12-08 02:51:00 | 50558.92 | 50478.51 |  50567.6 | 50458.45 |  50518.42091314032
--More-- 
 2021-12-08 02:52:00 | 50470.75 | 50483.68 | 50489.56 | 50462.06 | 50475.890842490844
--More-- 
 2021-12-08 02:53:00 |  50484.3 | 50510.72 | 50520.84 | 50466.65 | 50490.274766666655
--More-- 
 2021-12-08 02:54:00 | 50509.18 | 50503.37 | 50518.22 | 50484.95 |   50503.5868955224
--More-- 
 2021-12-08 02:55:00 | 50501.49 | 50465.01 | 50524.23 |    50465 |  50500.22739130434
--More-- 
 2021-12-08 02:56:00 | 50465.02 | 50458.33 | 50484.84 | 50448.04 | 50461.675732647825
--More-- 
 2021-12-08 02:57:00 | 50455.03 | 50377.44 | 50456.42 | 50377.36 | 50416.130431965474
--More-- 
 2021-12-08 02:58:00 | 50377.36 | 50365.82 | 50391.63 | 50357.51 |  50370.21003472224
--More-- 
 2021-12-08 02:59:00 | 50366.87 | 50379.99 | 50387.09 | 50357.51 |  50369.59727272727
--More-- 
 2021-12-08 03:00:00 |  50381.1 | 50345.28 | 50396.25 | 50336.06 |   50357.6729925187
--More-- 
 2021-12-08 03:01:00 | 50345.27 | 50357.73 | 50384.95 | 50340.76 |  50356.77142045452
--More-- 
 2021-12-08 03:02:00 | 50359.99 |  50379.6 | 50399.99 | 50359.99 |   50383.7826478873
--More-- 
 2021-12-08 03:03:00 | 50380.21 | 50405.66 | 50405.66 | 50367.35 |  50378.00012135923
--More-- 
 2021-12-08 03:04:00 | 50404.84 | 50415.32 |  50451.3 | 50404.83 |  50428.55674418606
--More-- 
 2021-12-08 03:05:00 | 50412.94 | 50390.62 | 50420.08 | 50374.82 | 50399.481851851844
--More-- 
 2021-12-08 03:06:00 | 50390.63 |  50396.8 | 50403.81 | 50384.81 |  50393.99229838709
--More-- 
 2021-12-08 03:07:00 | 50393.37 | 50391.54 | 50416.64 | 50385.75 |  50400.90525700934
--More-- 
 2021-12-08 03:08:00 | 50389.18 | 50387.85 | 50428.95 |  50383.6 |   50401.5722036728
--More-- 
 2021-12-08 03:09:00 | 50388.75 | 50409.86 | 50415.42 | 50388.75 | 50406.606112469424
--More-- 
 2021-12-08 03:10:00 | 50409.85 | 50408.41 | 50428.46 | 50394.06 | 50411.908551724155
--More-- 
 2021-12-08 03:11:00 | 50408.77 | 50405.01 | 50415.74 | 50390.13 |  50401.90870775347
--More-- 
 2021-12-08 03:12:00 | 50400.14 | 50447.19 | 50447.19 | 50398.67 |   50422.0528463476
--More-- 
 2021-12-08 03:13:00 |  50447.2 | 50470.25 | 50500.04 | 50447.19 | 50475.815767790256
--More-- 
 2021-12-08 03:14:00 | 50470.24 |  50461.2 | 50489.52 | 50458.44 |  50472.54979400749
--More-- 
 2021-12-08 03:15:00 | 50461.17 | 50433.59 | 50482.02 | 50425.28 |   50459.6068611111
--More-- 
 2021-12-08 03:16:00 | 50433.69 | 50476.88 | 50476.88 | 50430.67 | 50450.811331719146
--More-- 
 2021-12-08 03:17:00 |    50477 | 50499.98 | 50499.99 |    50477 | 50493.129337016566
--More-- 
 2021-12-08 03:18:00 | 50499.97 | 50461.22 | 50515.14 | 50461.16 |  50488.16815286625
--More-- 
 2021-12-08 03:19:00 |  50461.3 | 50439.07 | 50465.28 | 50426.03 | 50449.369356568364
--More-- 
 2021-12-08 03:20:00 | 50439.06 | 50399.06 | 50446.26 | 50388.89 |  50416.82834158414
--More-- 
 2021-12-08 03:21:00 | 50396.51 | 50408.56 | 50408.56 | 50390.72 |   50402.0558458244
--More-- 
 2021-12-08 03:22:00 | 50406.27 | 50379.46 | 50431.38 | 50368.38 |  50407.54194148936
--More-- 
 2021-12-08 03:23:00 | 50380.95 | 50403.53 | 50403.53 | 50374.83 | 50386.008351955315
--More-- 
 2021-12-08 03:24:00 | 50403.52 | 50454.54 | 50454.54 | 50394.38 |  50420.60028268551
--More-- 
 2021-12-08 03:25:00 | 50452.13 | 50458.76 | 50468.88 | 50452.13 |   50459.4033707865
--More-- 
 2021-12-08 03:26:00 | 50458.75 | 50450.34 |  50473.8 | 50440.99 |  50458.76663185379
--More-- 
 2021-12-08 03:27:00 | 50450.35 | 50447.84 | 50498.33 | 50447.48 |  50471.75489071038
--More-- 
 2021-12-08 03:28:00 | 50447.85 | 50429.75 | 50452.34 |  50419.7 |  50436.08064638783
--More-- 
 2021-12-08 03:29:00 | 50429.13 | 50368.38 | 50429.13 | 50368.38 |  50392.60437086093
--More-- 
 2021-12-08 03:30:00 | 50368.39 |  50395.6 | 50403.24 | 50368.38 |   50390.4182653061
--More-- 
 2021-12-08 03:31:00 | 50395.61 | 50388.72 | 50397.99 | 50386.92 | 50394.137571428575
--More-- q
level4=# 

level4=# 

level4=# 

level4=# 

level4=# select * from markets ;
select * from markets ;
 id | major_symbol_id | quote_symbol_id | exchange_id | market_type 
----+-----------------+-----------------+-------------+-------------
  1 |               1 |               2 |           1 | SPOT
  2 |               3 |               2 |           1 | SPOT
  3 |               3 |               4 |           1 | SPOT
  4 |               1 |               4 |           1 | SPOT
  5 |               5 |               4 |           1 | SPOT
  6 |               5 |               2 |           1 | SPOT
  7 |               3 |               6 |           2 | SPOT
  8 |               5 |               6 |           2 | SPOT
  9 |               1 |               6 |           2 | SPOT
(9 rows)

level4=# \l+
\l+
                                                                List of databases
   Name    | Owner  | Encoding |  Collate   |   Ctype    | Access privileges |  Size   | Tablespace |                Description                 
-----------+--------+----------+------------+------------+-------------------+---------+------------+--------------------------------------------
 level4    | level4 | UTF8     | en_US.utf8 | en_US.utf8 |                   | 122 MB  | pg_default | 
 postgres  | level4 | UTF8     | en_US.utf8 | en_US.utf8 |                   | 9233 kB | pg_default | default administrative connection database
 template0 | level4 | UTF8     | en_US.utf8 | en_US.utf8 | =c/level4        +| 7825 kB | pg_default | unmodifiable empty database
           |        |          |            |            | level4=CTc/level4 |         |            | 
 template1 | level4 | UTF8     | en_US.utf8 | en_US.utf8 | =c/level4        +| 9241 kB | pg_default | default template for new databases
           |        |          |            |            | level4=CTc/level4 |         |            | 
(4 rows)

level4=# 

level4=# 